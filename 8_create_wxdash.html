<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>WxDash</title>

<meta property="og:title" content="WxDash" />

<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />

<link rel="icon" href="data:image/x-icon;" type="image/x-icon">


<script type="text/javascript">
window.FlexDashboardComponents = [];
</script>

<script id="flexdashboard-navbar" type="application/json">
[{"title":"Source Code","icon":"fa-github","href":"https://github.com/oucrcm/wxdash","align":"right"}]
</script>
<style type="text/css">

/*
 Dashboard CSS from Keen IO Dashboards
 (https://github.com/keen/dashboards)
*/

body {
  background: #f2f2f2;
  padding: 60px 0 0 8px; /* padding-top overridden by theme */
}

body hr {
  border-color: #d7d7d7;
  margin: 10px 0;
}

.navbar-inverse .navbar-nav > li > a,
.navbar .navbar-brand {
  text-decoration: none;
}

.navbar-logo {
  margin-top: 1px;
}

.navbar-logo img {
  margin-right: 12px;
}

.navbar-author {
  margin-left: 10px;
  font-size: 15px;
}

.navbar .dropdown-menu .fa {
  min-width: 20px;
}

.navbar .dropdown-menu {
  min-width: 150px;
  max-height: 500px;
  overflow: auto;
}

.chart-wrapper,
.nav-tabs-custom,
.sbframe-commentary
{
  background: #fff;
  border: 1px solid #e2e2e2;
  border-radius: 3px;
  margin-bottom: 8px;
  margin-right: 8px;
}

.chart-title {
  border-bottom: 1px solid #d7d7d7;
  color: #666;
  font-size: 14px;
  font-weight: 300;
  padding: 7px 10px 4px;
}

.chart-wrapper .chart-title:empty {
  display: none;
}

.chart-wrapper .chart-stage {
  overflow: hidden;
  padding: 5px 10px;
  position: relative;
}

.chart-wrapper .chart-notes {
  background: #fbfbfb;
  border-top: 1px solid #e2e2e2;
  color: #808080;
  font-size: 12px;
  padding: 8px 10px 5px;
}

/*
 CSS for handling flexbox layout
*/

#dashboard-container {
  visibility: hidden;
}

.tab-content>.dashboard-page-wrapper.active {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.dashboard-page-wrapper {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}

.dashboard-row-orientation {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}

.dashboard-row {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
}

.dashboard-row-flex {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
}

.dashboard-column-orientation {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
}

.dashboard-column {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}

.chart-wrapper-flex {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
}

.chart-stage-flex {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
  position: relative;
}

.chart-shim {
  position: absolute;
  left: 8px; top: 8px; right: 8px; bottom: 8px;
}

.no-padding .chart-shim {
  left: 0; top: 0; right: 0; bottom: 0;
}

.flowing-content-shim {
  overflow: auto;
  left: 0; top: 0; right: 0; bottom: 0;
  padding-left: 8px;
  padding-right: 8px;
}

.flowing-content-container {
  padding-top: 8px;
  padding-bottom: 8px;
}

.chart-stage .table-bordered {
  border: none;
}

.chart-stage .table-bordered > tbody > tr > th,
.chart-stage .table-bordered > tfoot > tr > th,
.chart-stage .table-bordered > tbody > tr > td,
.chart-stage .table-bordered > tfoot > tr > td {
  border: none;
}

.chart-stage .table-bordered > tbody > tr > td {
  border-top: 1px solid #dddddd;
}

.chart-stage .table-bordered > thead > tr > th {
  border: none;
  border-bottom: 2px solid #dddddd;
}

.bootstrap-table table>thead {
  background-color: #fff;
}

.bootstrap-table table.data,
.bootstrap-table table.shiny-table {
  width: inherit !important;
}

.bootstrap-table table.data>tbody>tr>th,
.bootstrap-table table.shiny-table>tbody>tr>th {
  border-top: none;
  border-bottom: 2px solid #dddddd;
  padding: 5px;
}

.bootstrap-table .data td[align=right] {
  font-family: inherit;
}

.chart-wrapper form {
  padding-left: 5px;
  padding-right: 5px;
}

.shiny-input-container label {
  font-weight: normal;
}

.chart-stage .html-widget {
  width: 100% !important;
  height: 100% !important;
}

.chart-stage .html-widget-static-bound {
  width: 100% !important;
  height: 100% !important;
}

.chart-stage .shiny-bound-output {
  width: 100% !important;
  height: 100% !important;
}

/* Omit display of empty paragraphs */

.chart-shim>p:empty {
  display: none;
}

.chart-stage>p:empty {
  display: none;
}

/* Omit display of special knitr options div*/

.chart-stage .knitr-options {
  display: none;
}

/* Automatically resizing images */

.image-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
}

.image-container img {
  opacity: 0;
  overflow: hidden;
}

/* Value box */

.value-box {
  border-radius: 2px;
  position: relative;
  display: block;
  margin-right: 8px;
  margin-bottom: 8px;
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
}

.value-box > .inner {
  padding: 10px;
  padding-left: 20px;
  padding-right: 20px;
}

.value-box .value {
  font-size: 38px;
  font-weight: bold;
  margin: 0 0 3px 0;
  white-space: nowrap;
  padding: 0;
}

.value-box .caption {
  font-size: 15px;
}
.value-box .caption > small {
  display: block;
  font-size: 13px;
  margin-top: 5px;
}

.value-box .icon i {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 80px;
  color: rgba(0, 0, 0, 0.15);
}

.linked-value:hover {
  cursor: pointer;
}

.value-box.linked-value:hover {
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
}

/* STORYBOARD */

.storyboard-nav button {
  background: transparent;
  border: 0;
  opacity: .3;
  outline: none;
  padding: 0;
}

.storyboard-nav button:hover,
.storyboard-nav button:hover {
  opacity: .5;
}

.storyboard-nav button:disabled,
.storyboard-nav button:disabled {
  opacity: .1;
}

.storyboard-nav .sbnext,
.storyboard-nav .sbprev {
  float: left;
  width: 2%;
  height: 120px;
  font-size: 50px;
}

.storyboard-nav .sbprev {
  text-align: left;
  width: 2%;
}

.storyboard-nav .sbnext {
  float: right;
  text-align: right;
  margin-right: 8px;
}

.storyboard-nav .sbframelist {
  margin: 0 auto;
  width: 94%;
  height: 120px;
  overflow: hidden;
  text-shadow: none;
  margin-bottom: 8px;
}

.storyboard-nav .sbframelist ul {
  list-style: none;
  margin: 0;
  padding: 0;
  height: 100%;
}

.storyboard-nav .sbframelist ul li {
  float: left;
  width: 270px;
  height: 100%;
  padding: 10px 10px 10px 10px;
  margin-right: 8px;
  background: #fff;
  border: 1px solid #e2e2e2;
  border-radius: 3px;
  color: #3a3c47;
  text-align: left;
  font-size: 14px;
  cursor: pointer;
}

.storyboard-nav .sbframelist ul li:last-child {
  margin-right: 0px;
}

.storyboard-nav .sbframelist ul li.active {
  color: #fff;
  background: #B8B8B8;
}

.sbframe-commentary {
  width: 300px;
  background: #fbfbfb;
  font-size: 14px;
}

.sbframe-commentary ul {
  padding-left: 22px;
}

.sbframe.active {
  display: flex;
}

.sbframe:not(.active) {
  display: none;
}

/* NAV TABS */

.nav-tabs-custom > .nav-tabs {
  margin: 0;
  border-bottom: 1px solid #d7d7d7;
  color: #666;
  font-size: 14px;
  font-weight: 300;
  border-top-right-radius: 3px;
  border-top-left-radius: 3px;
}
.nav-tabs-custom > .nav-tabs > li {
  border-top: 3px solid transparent;
  margin-bottom: -1px;
  margin-right: 5px;
}
.nav-tabs-custom > .nav-tabs > li > a,
.nav-tabs-custom > .nav-tabs > li > a:active {
  color: #666;
  font-weight: 300;
  font-size: 14px;
  border-radius: 0;
  padding: 3px 10px 5px;
  text-transform: none;
}

.nav-tabs-custom > .nav-tabs > li:not(.active) > a {
  border-bottom-color: transparent;
}

.nav-tabs-custom > .nav-tabs > li > a.text-muted {
  color: #999;
}
.nav-tabs-custom > .nav-tabs > li > a,
.nav-tabs-custom > .nav-tabs > li > a:hover {
  background: transparent;
  margin: 0;
}
.nav-tabs-custom > .nav-tabs > li > a:hover {
  color: #999;
}
.nav-tabs-custom > .nav-tabs > li:not(.active) > a:hover,
.nav-tabs-custom > .nav-tabs > li:not(.active) > a:focus,
.nav-tabs-custom > .nav-tabs > li:not(.active) > a:active {
  border-color: transparent;
}
.nav-tabs-custom > .nav-tabs > li.active {
  border-top-color: #3c8dbc;
}
.nav-tabs-custom > .nav-tabs > li.active > a,
.nav-tabs-custom > .nav-tabs > li.active:hover > a {
  background-color: #fff;
  color: #666;
}
.nav-tabs-custom > .nav-tabs > li.active > a {
  border-top-color: transparent;
  border-left-color: #d7d7d7;
  border-right-color: #d7d7d7;
}
.nav-tabs-custom > .nav-tabs > li:first-of-type {
  margin-left: 0;
}
.nav-tabs-custom > .nav-tabs > li:first-of-type.active > a {
  border-left-color: transparent;
}
.nav-tabs-custom > .nav-tabs.pull-right {
  float: none !important;
}
.nav-tabs-custom > .nav-tabs.pull-right > li {
  float: right;
}
.nav-tabs-custom > .nav-tabs.pull-right > li:first-of-type {
  margin-right: 0;
}
.nav-tabs-custom > .nav-tabs.pull-right > li:first-of-type > a {
  border-left-width: 1px;
}
.nav-tabs-custom > .nav-tabs.pull-right > li:first-of-type.active > a {
  border-left-color: #d7d7d7;
  border-right-color: transparent;
}
.nav-tabs-custom > .nav-tabs > li.header {
  line-height: 35px;
  padding: 0 10px;
  font-size: 20px;
  color: #666;
}
.nav-tabs-custom > .nav-tabs > li.header > .fa,
.nav-tabs-custom > .nav-tabs > li.header > .glyphicon,
.nav-tabs-custom > .nav-tabs > li.header > .ion {
  margin-right: 5px;
}
.nav-tabs-custom > .tab-content {
  background: #fff;
  padding: 0;
  border-bottom-right-radius: 3px;
  border-bottom-left-radius: 3px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.nav-tabs-custom > .tab-content > .chart-wrapper {
  background: #fff;
  border: none;
  margin: 0;
}


.nav-tabs-custom > .tab-content > .active {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.nav-tabs-custom .dropdown.open > a:active,
.nav-tabs-custom .dropdown.open > a:focus {
  background: transparent;
  color: #999;
}


@media (max-width: 767px) {
  .value-box {
    text-align: center;
    margin-right: 8px;
  }
  .value-box .icon {
    display: none;
  }
}

/* Fixed position sidebar */

.section.sidebar {
  position: fixed;
  top: 51px; /* overridden by theme */
  left: 0;
  bottom: 0;
  border-right: 1px solid #e2e2e2;
  background-color: white; /* overridden by theme */
  padding-left: 10px;
  padding-right: 10px;
  visibility: hidden;
  overflow: auto;
}

.section.sidebar form p:first-child {
  margin-top: 10px;
}

/* Embedded source code */

#flexdashboard-source-code {
  display: none;
}

.featherlight-content #flexdashboard-source-code {
  display: inline-block;
}

.featherlight-content {
  width: 80%;
  max-width: 800px;
  padding: 0 !important;
  border-bottom: none !important;
}

.featherlight:last-of-type {
  background: rgba(0, 0, 0, 0.7);
}

.featherlight-inner {
  width: 100%;
}

.featherlight-content pre {
  margin: 0;
  border: 0;
  background: #fff;
  font-size: 12px;
}

.unselectable {
  -ms-user-select: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: -moz-none;
  -o-user-select: none;
  user-select: none;
}

#flexdashboard-source-code code {
  -ms-user-select: text;
  -webkit-user-select: text;
  -khtml-user-select: text;
  -moz-user-select: text;
  -o-user-select: text;
  user-select: text;
}

/* DataTables Tweaks */

.dataTables_filter input[type="search"] {
  -webkit-appearance: searchfield;
  outline: none;
}

.dataTables_wrapper.no-footer
.dataTables_info {
  padding-top: 0;
}


table.dataTable thead th {
  border-bottom: 1px solid #d7d7d7;
}

.dataTables_wrapper.no-footer .dataTables_scrollBody {
  border-bottom: 1px solid #d7d7d7;
}

/* Mobile phone only CSS */

.desktop-layout div.section.mobile {
  display: none;
}

.mobile-layout div.section.no-mobile {
  display: none;
}

.mobile-figure {
  display: none;
}



body {
  padding-top: 50px;
}

.section.sidebar {
  top: 41px;
  background-color: rgba(217, 35, 15, 0.1);
}

.value-box {
  color: inherit;
}

.bg-primary {
  background-color: rgba(217, 35, 15, 0.25);
}

.storyboard-nav .sbframelist ul li.active {
  background-color: rgba(217, 35, 15, 0.7);
}

.nav-tabs-custom > .nav-tabs > li.active {
  border-top-color: rgba(217, 35, 15, 0.7);
}
</style>



</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">

<button id="navbar-button" type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>

<span class="navbar-logo pull-left">
  
</span>
<span class="navbar-brand">
  WxDash
  <span class="navbar-author">
        </span>
</span>

</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav navbar-left">
</ul>
<ul class="nav navbar-nav navbar-right">
</ul>
</div><!--/.nav-collapse-->
</div><!--/.container-->
</div><!--/.navbar-->

<script type="text/javascript">


var FlexDashboard = (function () {

  // initialize options
  var _options = {};

  var FlexDashboard = function() {

    // default options
    _options = $.extend(_options, {
      theme: "cosmo",
      fillPage: false,
      orientation: 'columns',
      storyboard: false,
      defaultFigWidth: 576,
      defaultFigHeight: 461,
      defaultFigWidthMobile: 360,
      defaultFigHeightMobile: 461,
      isMobile: false,
      isPortrait: false,
      resize_reload: true
    });
  };

  function init(options) {

    // extend default options
    $.extend(true, _options, options);

    // add ids to sections that don't have them (pandoc won't assign ids
    // to e.g. sections with titles consisting of only chinese characters)
    var nextId = 1;
    $('.level1:not([id]),.level2:not([id]),.level3:not([id])').each(function() {
      $(this).attr('id', 'dashboard-' + nextId++);
    });

    // find navbar items
    var navbarItems = $('#flexdashboard-navbar');
    if (navbarItems.length)
      navbarItems = JSON.parse(navbarItems.html());
    addNavbarItems(navbarItems);

    // find the main dashboard container
    var dashboardContainer = $('#dashboard-container');

    // resolve mobile classes
    resolveMobileClasses(dashboardContainer);

    // one time global initialization for components
    componentsInit(dashboardContainer);

    // look for a global sidebar
    var globalSidebar = dashboardContainer.find(".section.level1.sidebar");
    if (globalSidebar.length > 0) {

      // global layout for fullscreen displays
      if (!isMobilePhone()) {

         // hoist it up to the top level
         globalSidebar.insertBefore(dashboardContainer);

         // lay it out (set width/positions)
         layoutSidebar(globalSidebar, dashboardContainer);

      // tuck sidebar into first page for mobile phones
      } else {

        // convert it into a level3 section
        globalSidebar.removeClass('sidebar');
        globalSidebar.removeClass('level1');
        globalSidebar.addClass('level3');
        var h1 = globalSidebar.children('h1');
        var h3 = $('<h3></h3>');
        h3.append(h1.contents());
        h3.insertBefore(h1);
        h1.detach();

        // move it into the first page
        var page = dashboardContainer.find('.section.level1').first();
        if (page.length > 0)
          page.prepend(globalSidebar);
      }
    }

    // look for pages to layout
    var pages = $('div.section.level1');
    if (pages.length > 0) {

        // find the navbar and collapse on clicked
        var navbar = $('#navbar');
        navbar.on("click", "a[data-toggle!=dropdown]", null, function () {
           navbar.collapse('hide');
        });

        // envelop the dashboard container in a tab content div
        dashboardContainer.wrapInner('<div class="tab-content"></div>');

        pages.each(function(index) {

          // lay it out
          layoutDashboardPage($(this));

          // add it to the navbar
          addToNavbar($(this), index === 0);

        });

    } else {

      // remove the navbar and navbar button if we don't
      // have any navbuttons
      if (navbarItems.length === 0) {
        $('#navbar').remove();
        $('#navbar-button').remove();
      }

      // add the storyboard class if requested
      if (_options.storyboard)
        dashboardContainer.addClass('storyboard');

      // layout the entire page
      layoutDashboardPage(dashboardContainer);
    }

    // if we are in shiny we need to trigger a window resize event to
    // force correct layout of shiny-bound-output elements
    if (isShinyDoc())
      $(window).trigger('resize');

    // make main components visible
    $('.section.sidebar').css('visibility', 'visible');
    dashboardContainer.css('visibility', 'visible');

    // handle location hash
    handleLocationHash();

    // intialize prism highlighting
    initPrismHighlighting();

    // record mobile and orientation state then register a handler
    // to refresh if resize_reload is set to true and it changes
    _options.isMobile = isMobilePhone();
    _options.isPortrait = isPortrait();
    if (_options.resize_reload) {
      $(window).on('resize', function() {
        if (_options.isMobile !== isMobilePhone() ||
            _options.isPortrait !== isPortrait()) {
          window.location.reload();
        }
      });
    } else {
      // if in desktop mode and resizing to mobile, make sure the heights are 100%
      // This enforces what `fillpage.css` does for "wider" pages.
      // Since we are not reloading once the page becomes small, we need to force the height to 100%
      // This is a new situation introduced when `_options.resize_reload` is `false`
      if (! _options.isMobile) {
        // only add if `fillpage.css` was added in the first place
        if (_options.fillPage) {
          // fillpage.css
          $("html,body,#dashboard").css("height", "100%");
        }
      }
    }
    // trigger layoutcomplete event
    dashboardContainer.trigger('flexdashboard:layoutcomplete');
  }

  function resolveMobileClasses(dashboardContainer) {
     // add top level layout class
    dashboardContainer.addClass(isMobilePhone() ? 'mobile-layout' :
                                                  'desktop-layout');

    // look for .mobile sections and add .no-mobile to their peers
    var mobileSections = $('.section.mobile');
    mobileSections.each(function() {
       var id = $(this).attr('id');
       var nomobileId = id.replace(/-\d+$/, '');
       $('#' + nomobileId).addClass('no-mobile');
    });
  }

  function addNavbarItems(navbarItems) {

    var navbarLeft = $('ul.navbar-left');
    var navbarRight = $('ul.navbar-right');

    for (var i = 0; i<navbarItems.length; i++) {

      // get the item
      var item = navbarItems[i];

      // determine the container
      var container = null;
      if (item.align === "left")
        container = navbarLeft;
      else
        container = navbarRight;

      // navbar menu if we have multiple items
      if (item.items) {
        var menu = navbarMenu(null, item.icon, item.title, container);
        for (var j = 0; j<item.items.length; j++) {
          var subItem = item.items[j];
          var li = $('<li></li>');
          li.append(navbarLink(subItem.icon, subItem.title, subItem.href, subItem.target));
          menu.append(li);
        }
      } else {
        var li = $('<li></li>');
        li.append(navbarLink(item.icon, item.title, item.href, item.target));
        container.append(li);
      }
    }
  }

  // create or get a reference to an existing dropdown menu
  function navbarMenu(id, icon, title, container) {
    var existingMenu = [];
    if (id)
      existingMenu = container.children('#' + id);
    if (existingMenu.length > 0) {
      return existingMenu.children('ul');
    } else {
      var li = $('<li></li>');
      if (id)
        li.attr('id', id);
      li.addClass('dropdown');
      // auto add "Share" title on mobile if necessary
      if (!title && icon && (icon === "fa-share-alt") && isMobilePhone())
        title = "Share";
      if (title) {
        title = title + ' <span class="caret"></span>';
      }
      var a = navbarLink(icon, title, "#");
      a.addClass('dropdown-toggle');
      a.attr('data-toggle', 'dropdown');
      a.attr('role', 'button');
      a.attr('aria-expanded', 'false');
      li.append(a);
      var ul = $('<ul class="dropdown-menu"></ul>');
      ul.attr('role', 'menu');
      li.append(ul);
      container.append(li);
      return ul;
    }
  }

  function addToNavbar(page, active) {

    // capture the id and data-icon attribute (if any)
    var id = page.attr('id');
    var icon = page.attr('data-icon');
    var navmenu = page.attr('data-navmenu');

    // get hidden state (transfer this to navbar)
    var hidden = page.hasClass('hidden');
    page.removeClass('hidden');

    // sanitize the id for use with bootstrap tabs
    id = id.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_');
    page.attr('id', id);

    // get the wrapper
    var wrapper = page.closest('.dashboard-page-wrapper');

    // move the id to the wrapper
    page.removeAttr('id');
    wrapper.attr('id', id);

    // add the tab-pane class to the wrapper
    wrapper.addClass('tab-pane');
    if (active)
      wrapper.addClass('active');

    // get a reference to the h1, discover its inner contens, then detach it
    var h1 = wrapper.find('h1').first();
    var title = h1.contents();
    h1.detach();

    // create a navbar item
    var li = $('<li></li>');
    var a = navbarLink(icon, title, '#' + id);
    a.attr('data-toggle', 'tab');
    li.append(a);

    // add it to the navbar (or navbar menu if specified)
    var container = $('ul.navbar-left');
    if (navmenu) {
      var menuId = navmenu.replace(/\s+/g, '');
      var menu = navbarMenu(menuId, null, navmenu, container);
      menu.append(li);
    } else {
      container.append(li);
    }

    // hide it if requested
    if (hidden)
      li.addClass('hidden');
  }

  function navbarLink(icon, title, href, target) {

    var a = $('<a></a>');
    if (icon) {

      // get the name of the icon set and icon
      var dashPos = icon.indexOf("-");
      var iconSet = null;
      var iconSplit = icon.split(" ");
      if (iconSplit.length > 1) {
        iconSet = iconSplit[0];
        icon = iconSplit.slice(1).join(" ");
      } else {
        iconSet = icon.substring(0, dashPos);
      }
      var iconName = icon.substring(dashPos + 1);

      // create the icon
      var iconElement = $('<span class="' + iconSet + ' ' + icon + '"></span>');
      if (title)
        iconElement.css('margin-right', '7px');
      a.append(iconElement);
      // if href is null see if we can auto-generate based on icon (e.g. social)
      if (!href)
        maybeGenerateLinkFromIcon(iconName, a);
    }
    if (title)
      a.append(title);

    // add the href.
    if (href) {
      if (href === "source_embed") {
        a.attr('href', '#');
        a.attr('data-featherlight', "#flexdashboard-source-code");
        a.featherlight({
            beforeOpen: function(event){
              $('body').addClass('unselectable');
            },
            afterClose: function(event){
              $('body').removeClass('unselectable');
            }
        });
      } else {
        a.attr('href', href);
      }
    }

    // add the arget
    if (target)
      a.attr('target', target);

    return a;
  }

  // auto generate a link from an icon name (e.g. twitter) when possible
  function maybeGenerateLinkFromIcon(iconName, a) {

     var serviceLinks = {
      "twitter": "https://twitter.com/share?text=" + encodeURIComponent(document.title) + "&url="+encodeURIComponent(location.href),
      "facebook": "https://www.facebook.com/sharer/sharer.php?s=100&p[url]="+encodeURIComponent(location.href),
      "google-plus": "https://plus.google.com/share?url="+encodeURIComponent(location.href),
      "linkedin": "https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(location.href) + "&title=" + encodeURIComponent(document.title),
      "pinterest": "https://pinterest.com/pin/create/link/?url="+encodeURIComponent(location.href) + "&description=" + encodeURIComponent(document.title)
    };

    var makeSocialLink = function(a, href) {
      a.attr('href', '#');
      a.on('click', function(e) {
        e.preventDefault();
        window.open(href);
      });
    };

    $.each(serviceLinks, function(key, value) {
      if (iconName.indexOf(key) !== -1)
        makeSocialLink(a, value);
    });
  }

  // layout a dashboard page
  function layoutDashboardPage(page) {

    // use a page wrapper so that free form content above the
    // dashboard appears at the top rather than the side (as it
    // would without the wrapper in a column orientation)
    var wrapper = $('<div class="dashboard-page-wrapper"></div>');
    page.wrap(wrapper);

    // if there are no level2 or level3 headers synthesize a level3
    // header to contain the (e.g. frame it, scroll container, etc.)
    var headers = page.find('h2,h3');
    if (headers.length === 0)
      page.wrapInner('<div class="section level3"></div>');

    // hoist up any content before level 2 or level 3 headers
    var children = page.children();
    children.each(function(index) {
      if ($(this).hasClass('level2') || $(this).hasClass('level3'))
        return false;
      $(this).insertBefore(page);
    });

    // determine orientation and fillPage behavior for distinct media
    var orientation, fillPage, storyboard;

    // media: mobile phone
    if (isMobilePhone()) {

      // if there is a sidebar we need to ensure it's content
      // is properly framed as an h3
      var sidebar = page.find('.section.sidebar');
      sidebar.removeClass('sidebar');
      sidebar.wrapInner('<div class="section level3"></div>');
      var h2 = sidebar.find('h2');
      var h3 = $('<h3></h3>');
      h3.append(h2.contents());
      h3.insertBefore(h2);
      h2.detach();

      // wipeout h2 elements then enclose them in a single h2
      var level2 = page.find('div.section.level2');
      level2.each(function() {
        level2.children('h2').remove();
        level2.children().unwrap();
      });
      page.wrapInner('<div class="section level2"></div>');

      // substitute mobile images
      if (isPortrait()) {
        var mobileFigures = $('img.mobile-figure');
        mobileFigures.each(function() {
          // get the src (might be base64 encoded)
          var src = $(this).attr('src');

          // find it's peer
          var id = $(this).attr('data-mobile-figure-id');
          var img = $('img[data-figure-id=' + id + "]");
          img.attr('src', src)
             .attr('width', _options.defaultFigWidthMobile)
             .attr('height', _options.defaultFigHeightMobile);
        });
      }

      // hoist storyboard commentary into it's own section
      if (page.hasClass('storyboard')) {
        var commentaryHR = page.find('div.section.level3 hr');
        commentaryHR.each(function() {
          var commentary = $(this).nextAll().detach();
          var commentarySection = $('<div class="section level3"></div>');
          commentarySection.append(commentary);
          commentarySection.insertAfter($(this).closest('div.section.level3'));
          $(this).remove();
        });
      }

      // force a non full screen layout by columns
      orientation = _options.orientation = 'columns';
      fillPage = _options.fillPage = false;
      storyboard = _options.storyboard = false;

    // media: desktop
    } else {

      // determine orientation
      orientation = page.attr('data-orientation');
      if (orientation !== 'rows' && orientation != 'columns')
        orientation = _options.orientation;

      // determine storyboard mode
      storyboard = page.hasClass('storyboard');

      // fillPage based on options (force for storyboard)
      fillPage = _options.fillPage || storyboard;

      // handle sidebar
      var sidebar = page.find('.section.level2.sidebar');
      if (sidebar.length > 0)
        layoutSidebar(sidebar, page);
    }

    // give it and it's parent divs height: 100% if we are in fillPage mode
    if (fillPage) {
      page.addClass('vertical-layout-fill');
      page.css('height', '100%');
      page.parents('div').css('height', '100%');
    } else {
      page.addClass('vertical-layout-scroll');
    }

    // perform the layout
    if (storyboard)
      layoutPageAsStoryboard(page);
    else if (orientation === 'rows')
      layoutPageByRows(page, fillPage);
    else if (orientation === 'columns')
      layoutPageByColumns(page, fillPage);
  }

  function layoutSidebar(sidebar, content) {

    // get it out of the header hierarchy
    sidebar = sidebar.first();
    if (sidebar.hasClass('level1')) {
      sidebar.removeClass('level1');
      sidebar.children('h1').remove();
    } else if (sidebar.hasClass('level2')) {
      sidebar.removeClass('level2');
      sidebar.children('h2').remove();
    }

    // determine width
    var sidebarWidth = isTablet() ? 220 : 250;
    var dataWidth = parseInt(sidebar.attr('data-width'));
    if (dataWidth)
      sidebarWidth = dataWidth;

    // set the width and shift the page right to accomodate the sidebar
    sidebar.css('width', sidebarWidth + 'px');
    content.css('padding-left', sidebarWidth + 'px');

    // wrap it's contents in a form
    sidebar.wrapInner($('<form></form>'));
  }

  function layoutPageAsStoryboard(page) {

    // create storyboard navigation
    var nav = $('<div class="storyboard-nav"></div>');

    // add navigation buttons
    var prev = $('<button class="sbprev"><i class="fa fa-angle-left"></i></button>');
    nav.append(prev);
    var next= $('<button class="sbnext"><i class="fa fa-angle-right"></i></button>');
    nav.append(next);

    // add navigation frame
    var frameList = $('<div class="sbframelist"></div>');
    nav.append(frameList);
    var ul = $('<ul></ul>');
    frameList.append(ul);

     // find all the level3 sections (those are the storyboard frames)
    var frames = page.find('div.section.level3');
    frames.each(function() {

      // mark it
      $(this).addClass('sbframe');

      // divide it into chart content and (optional) commentary
      $(this).addClass('dashboard-column-orientation');

      // stuff the chart into it's own div w/ flex
      $(this).wrapInner('<div class="sbframe-component"></div>');
      setFlex($(this), 1);
      var frame = $(this).children('.sbframe-component');

      // extract the title from the h3
      var li = $('<li></li>');
      var h3 = frame.children('h3');
      li.append(h3.contents());
      h3.detach();
      ul.append(li);

      // extract commentary
      var hr = frame.children('hr');
      if (hr.length) {
        var commentary = hr.nextAll().detach();
        hr.remove();
        var commentaryFrame = $('<div class="sbframe-commentary"></div>');
        commentaryFrame.addClass('flowing-content-shim');
        commentaryFrame.addClass('flowing-content-container');
        commentaryFrame.append(commentary);
        $(this).append(commentaryFrame);

        // look for a data-commentary-width attribute
        var commentaryWidth = $(this).attr('data-commentary-width');
        if (commentaryWidth)
          commentaryFrame.css('width', commentaryWidth + 'px');
      }

      // layout the chart (force flex)
      var result = layoutChart(frame, true);

      // ice the notes if there are none
      if (!result.notes)
        frame.find('.chart-notes').remove();

      // set flex on chart
      setFlex(frame, 1);
    });

    // create a div to hold all the frames
    var frameContent = $('<div class="sbframe-content"></div>');
    frameContent.addClass('dashboard-row-orientation');
    frameContent.append(frames.detach());

    // row orientation to stack nav and frame content
    page.addClass('dashboard-row-orientation');
    page.append(nav);
    page.append(frameContent);
    setFlex(frameContent, 1);

    // initialize sly
    var sly = new Sly(frameList, {
    		horizontal: true,
    		itemNav: 'basic',
    		smart: true,
    		activateOn: 'click',
    		startAt: 0,
    		scrollBy: 1,
    		activatePageOn: 'click',
    		speed: 200,
    		moveBy: 600,
    		dragHandle: true,
    		dynamicHandle: true,
    		clickBar: true,
    		keyboardNavBy: 'items',
    		next: next,
    		prev: prev
    	}).init();

    // make first frame active
    frames.removeClass('active');
    frames.first().addClass('active');

    // subscribe to frame changed events
    sly.on('active', function (eventName, itemIndex) {
      frames.removeClass('active');
      frames.eq(itemIndex).addClass('active')
                          .trigger('shown');
    });
  }

  function layoutPageByRows(page, fillPage) {

    // row orientation
    page.addClass('dashboard-row-orientation');

    // find all the level2 sections (those are the rows)
    var rows = page.find('div.section.level2');

    // if there are no level2 sections then treat the
    // entire page as if it's a level 2 section
    if (rows.length === 0) {
      page.wrapInner('<div class="section level2"></div>');
      rows = page.find('div.section.level2');
    }

    rows.each(function () {

      // flags
      var haveNotes = false;
      var haveFlexHeight = true;

      // remove the h2
      $(this).children('h2').remove();

      // check for a tabset
      var isTabset = $(this).hasClass('tabset');
      if (isTabset)
        layoutTabset($(this));

      // give it row layout semantics if it's not a tabset
      if (!isTabset)
        $(this).addClass('dashboard-row');

      // find all of the level 3 subheads
      var columns = $(this).find('div.section.level3');

      // determine figureSizes sizes
      var figureSizes = chartFigureSizes(columns);

      // fixup the columns
      columns.each(function(index) {

        // layout the chart (force flex if we are in a tabset)
        var result = layoutChart($(this), isTabset);

        // update flexHeight state
        if (!result.flex)
          haveFlexHeight = false;

        // update state
        if (result.notes)
          haveNotes = true;

        // set the column flex based on the figure width
        // (value boxes will just get the default figure width)
        var chartWidth = figureSizes[index].width;
        setFlex($(this), chartWidth + ' ' + chartWidth + ' 0px');

      });

      // remove empty chart note divs
      if (isTabset)
        $(this).find('.chart-notes').filter(function() {
            return $(this).html() === "&nbsp;";
        }).remove();
      if (!haveNotes)
        $(this).find('.chart-notes').remove();

       // make it a flexbox row
      if (haveFlexHeight)
        $(this).addClass('dashboard-row-flex');

      // now we can set the height on all the wrappers (based on maximum
      // figure height + room for title and notes, or data-height on the
      // container if specified). However, don't do this if there is
      // no flex on any of the constituent columns
      var flexHeight = null;
      var dataHeight = parseInt($(this).attr('data-height'));
      if (dataHeight)
        flexHeight = adjustedHeight(dataHeight, columns.first());
      else if (haveFlexHeight)
        flexHeight = maxChartHeight(figureSizes, columns);
      if (flexHeight) {
        if (fillPage)
          setFlex($(this), flexHeight + ' ' + flexHeight + ' 0px');
        else {
          $(this).css('height', flexHeight + 'px');
          setFlex($(this), '0 0 ' + flexHeight + 'px');
        }
      }

    });
  }

  function layoutPageByColumns(page, fillPage) {

    // column orientation
    page.addClass('dashboard-column-orientation');

    // find all the level2 sections (those are the columns)
    var columns = page.find('div.section.level2');

    // if there are no level2 sections then treat the
    // entire page as if it's a level 2 section
    if (columns.length === 0) {
      page.wrapInner('<div class="section level2"></div>');
      columns = page.find('div.section.level2');
    }

    // layout each column
    columns.each(function (index) {

      // remove the h2
      $(this).children('h2').remove();

      // make it a flexbox column
      $(this).addClass('dashboard-column');

      // check for a tabset
      var isTabset = $(this).hasClass('tabset');
      if (isTabset)
        layoutTabset($(this));

      // find all the h3 elements
      var rows = $(this).find('div.section.level3');

      // get the figure sizes for the rows
      var figureSizes = chartFigureSizes(rows);

      // column flex is the max row width (or data-width if specified)
      var flexWidth;
      var dataWidth = parseInt($(this).attr('data-width'));
      if (dataWidth)
        flexWidth = dataWidth;
      else
        flexWidth = maxChartWidth(figureSizes);
      setFlex($(this), flexWidth + ' ' + flexWidth + ' 0px');

      // layout each chart
      rows.each(function(index) {

        // perform the layout
        var result = layoutChart($(this), false);

        // ice the notes if there are none
        if (!result.notes)
          $(this).find('.chart-notes').remove();

        // set flex height based on figHeight, then adjust
        if (result.flex) {
          var chartHeight = figureSizes[index].height;
          chartHeight = adjustedHeight(chartHeight, $(this));
          if (fillPage)
            setFlex($(this), chartHeight + ' ' + chartHeight + ' 0px');
          else {
            $(this).css('height', chartHeight + 'px');
            setFlex($(this), chartHeight + ' ' + chartHeight + ' ' + chartHeight + 'px');
          }
        }
      });
    });
  }

  function chartFigureSizes(charts) {

    // sizes
    var figureSizes = new Array(charts.length);

    // check each chart
    charts.each(function(index) {

      // start with default
      figureSizes[index] = {
        width: _options.defaultFigWidth,
        height: _options.defaultFigHeight
      };

      // look for data-height or data-width then knit options
      var dataWidth = parseInt($(this).attr('data-width'));
      var dataHeight = parseInt($(this).attr('data-height'));
      var knitrOptions = $(this).find('.knitr-options:first');
      var knitrWidth, knitrHeight;
      if (knitrOptions) {
        knitrWidth = parseInt(knitrOptions.attr('data-fig-width'));
        knitrHeight =  parseInt(knitrOptions.attr('data-fig-height'));
      }

      // width
      if (dataWidth)
        figureSizes[index].width = dataWidth;
      else if (knitrWidth)
        figureSizes[index].width = knitrWidth;

      // height
      if (dataHeight)
        figureSizes[index].height = dataHeight;
      else if (knitrHeight)
        figureSizes[index].height = knitrHeight;
    });

    // return sizes
    return figureSizes;
  }

  function maxChartHeight(figureSizes, charts) {

    // first compute the maximum height
    var maxHeight = _options.defaultFigHeight;
    for (var i = 0; i<figureSizes.length; i++)
      if (figureSizes[i].height > maxHeight)
        maxHeight = figureSizes[i].height;

    // now add offests for chart title and chart notes
    if (charts.length)
      maxHeight = adjustedHeight(maxHeight, charts.first());

    return maxHeight;
  }

  function adjustedHeight(height, chart) {
    if (chart.length > 0) {
      var chartTitle = chart.find('.chart-title');
      if (chartTitle.length)
        height += chartTitle.first().outerHeight();
      var chartNotes = chart.find('.chart-notes');
      if (chartNotes.length)
        height += chartNotes.first().outerHeight();
    }
    return height;
  }

  function maxChartWidth(figureSizes) {
    var maxWidth = _options.defaultFigWidth;
    for (var i = 0; i<figureSizes.length; i++)
      if (figureSizes[i].width > maxWidth)
        maxWidth = figureSizes[i].width;
    return maxWidth;
  }

  // layout a chart
  function layoutChart(chart, forceFlex) {

    // state to return
    var result = {
      notes: false,
      flex: false
    };

    // extract the title
    var title = extractTitle(chart);

    // find components that apply to this container
    var components = componentsFind(chart);

    // if it's a custom component then call it and return
    var customComponents = componentsCustom(components);
    if (customComponents.length) {
      componentsLayout(customComponents, title, chart);
      result.notes = false;
      result.flex = forceFlex || componentsFlex(customComponents);
      return result;
    }

    // put all the content in a chart wrapper div
    chart.addClass('chart-wrapper');
    chart.wrapInner('<div class="chart-stage"></div>');
    var chartContent = chart.children('.chart-stage');

    // flex the content if appropriate
    result.flex = forceFlex || componentsFlex(components);
    if (result.flex) {
      // add flex classes
      chart.addClass('chart-wrapper-flex');
      chartContent.addClass('chart-stage-flex');

      // additional shim to break out of flexbox sizing
      chartContent.wrapInner('<div class="chart-shim"></div>');
      chartContent = chartContent.children('.chart-shim');
    }

    // set custom data-padding attribute
    var pad = chart.attr('data-padding');
    if (pad) {
      if (pad === "0")
        chart.addClass('no-padding');
      else {
        pad = pad + 'px';
        chartContent.css('left', pad)
                    .css('top', pad)
                    .css('right', pad)
                    .css('bottom', pad)
      }
    }

    // call compoents
    componentsLayout(components, title, chartContent);

    // also activate components on shiny output
    findShinyOutput(chartContent).on('shiny:value',
      function(event) {
        var element = $(event.target);
        setTimeout(function() {

          // see if we opted out of flex based on our output (for shiny
          // we can't tell what type of output we have until after the
          // value is bound)
          var components = componentsFind(element);
          var flex = forceFlex || componentsFlex(components);
          if (!flex) {
            chart.css('height', "");
            setFlex(chart, "");
            chart.removeClass('chart-wrapper-flex');
            chartContent.removeClass('chart-stage-flex');
            chartContent.children().unwrap();
          }

          // perform layout
          componentsLayout(components, title, element.parent());
        }, 10);
      });

    // add the title
    var chartTitle = $('<div class="chart-title"></div>');
    chartTitle.append(title);
    chart.prepend(chartTitle);

    // add the notes section
    var chartNotes = $('<div class="chart-notes"></div>');
    chartNotes.html('&nbsp;');
    chart.append(chartNotes);

    // attempt to extract notes if we have a component
    if (components.length)
      result.notes = extractChartNotes(chartContent, chartNotes);

    // return result
    return result;
  }

  // build a tabset from a section div with the .tabset class
  function layoutTabset(tabset) {

    // check for fade option
    var fade = tabset.hasClass("tabset-fade");
    var navClass = "nav-tabs";

    // determine the heading level of the tabset and tabs
    var match = tabset.attr('class').match(/level(\d) /);
    if (match === null)
      return;
    var tabsetLevel = Number(match[1]);
    var tabLevel = tabsetLevel + 1;

    // find all subheadings immediately below
    var tabs = tabset.find("div.section.level" + tabLevel);
    if (!tabs.length)
      return;

    // create tablist and tab-content elements
    var tabList = $('<ul class="nav ' + navClass + '" role="tablist"></ul>');
    $(tabs[0]).before(tabList);
    var tabContent = $('<div class="tab-content"></div>');
    $(tabs[0]).before(tabContent);

    // build the tabset
    tabs.each(function(i) {

      // get the tab div
      var tab = $(tabs[i]);

      // get the id then sanitize it for use with bootstrap tabs
      var id = tab.attr('id');

      // sanitize the id for use with bootstrap tabs
      id = id.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_');
      tab.attr('id', id);

      // get the heading element within it and grab it's text
      var heading = tab.find('h' + tabLevel + ':first');
      var headingDom = heading.contents();

      // build and append the tab list item
      var a = $('<a role="tab" data-toggle="tab"></a>');
      a.append(headingDom);
      a.attr('href', '#' + id);
      a.attr('aria-controls', id);
      var li = $('<li role="presentation"></li>');
      li.append(a);
      if (i === 0)
        li.attr('class', 'active');
      tabList.append(li);

      // set it's attributes
      tab.attr('role', 'tabpanel');
      tab.addClass('tab-pane');
      tab.addClass('tabbed-pane');
      tab.addClass('no-title');
      if (fade)
        tab.addClass('fade');
      if (i === 0) {
        tab.addClass('active');
        if (fade)
          tab.addClass('in');
      }

      // move it into the tab content div
      tab.detach().appendTo(tabContent);
    });

    // add nav-tabs-custom
    tabset.addClass('nav-tabs-custom');

    // internal layout is dashboard-column with tab-content flexing
    tabset.addClass('dashboard-column');
    setFlex(tabContent, 1);
  }

  // one time global initialization for components
  function componentsInit(dashboardContainer) {
    for (var i=0; i<window.FlexDashboardComponents.length; i++) {
      var component = window.FlexDashboardComponents[i];
      if (component.init)
        component.init(dashboardContainer);
    }
  }

  // find components that apply within a container
  function componentsFind(container) {

    // look for components
    var components = [];
    for (var i=0; i<window.FlexDashboardComponents.length; i++) {
      var component = window.FlexDashboardComponents[i];
      if (component.find(container).length)
        components.push(component);
    }

    // if there were none then use a special flowing content component
    // that just adds a scrollbar in fillPage mode
    if (components.length == 0) {
      components.push({
        find: function(container) {
          return container;
        },

        flex: function(fillPage) {
          return fillPage;
        },

        layout: function(title, container, element, fillPage) {
          if (fillPage) {
            container.addClass('flowing-content-shim');
            container.addClass('flowing-content-container');
          }
        }
      });
    }

    return components;
  }

  // if there is a custom component then pick it out
  function componentsCustom(components) {
    var customComponent = [];
    for (var i=0; i<components.length; i++)
      if (components[i].type === "custom") {
        customComponent.push(components[i]);
        break;
      }
    return customComponent;
  }

  // query all components for flex
  function componentsFlex(components) {

    // no components at all means no flex
    if (components.length === 0)
      return false;

    // otherwise query components (assume true unless we see false)
    var isMobile = isMobilePhone();
    for (var i=0; i<components.length; i++)
      if (components[i].flex && !components[i].flex(_options.fillPage))
        return false;
    return true;
  }

  // layout all components
  function componentsLayout(components, title, container) {
    var isMobile = isMobilePhone();
    for (var i=0; i<components.length; i++) {
      var element = components[i].find(container);
      if (components[i].layout) {
        // call layout (don't call other components if it returns false)
        var result = components[i].layout(title, container, element, _options.fillPage);
        if (result === false)
          return;
      }
    }
  }

  // get a reference to the h3, discover it's inner html, and remove it
  function extractTitle(container) {
    var h3 = container.children('h3').first();
    var title = '';
    if (!container.hasClass('no-title'))
      title = h3.contents();
    h3.detach();
    return title;
  }

  // extract chart notes
  function extractChartNotes(chartContent, chartNotes) {
    // look for a terminating blockquote or image caption
    var blockquote = chartContent.children('blockquote:last-child');
    var caption = chartContent.children('div.image-container')
                              .children('p.caption');
    if (blockquote.length) {
      chartNotes.empty().append(blockquote.children('p:first-child').contents());
      blockquote.remove();
      return true;
    } else if (caption.length) {
      chartNotes.empty().append(caption.contents());
      caption.remove();
      return true;
    } else {
      return false;
    }
  }

  function findShinyOutput(chartContent) {
    return chartContent.find('.shiny-text-output, .shiny-html-output');
  }

  // safely detect rendering on a mobile phone
  function isMobilePhone() {
    try
    {
      return ! window.matchMedia("only screen and (min-width: 768px)").matches;
    }
    catch(e) {
      return false;
    }
  }

  function isFillPage() {
    return _options.fillPage;
  }

  // detect portrait mode
  function isPortrait() {
    return ($(window).width() < $(window).height());
  }

  // safely detect rendering on a tablet
  function isTablet() {
    try
    {
      return window.matchMedia("only screen and (min-width: 769px) and (max-width: 992px)").matches;
    }
    catch(e) {
      return false;
    }
  }

  // test whether this is a shiny doc
  function isShinyDoc() {
    return (typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings);
  }

  // set flex using vendor specific prefixes
  function setFlex(el, flex) {
    el.css('-webkit-box-flex', flex)
      .css('-webkit-flex', flex)
      .css('-ms-flex', flex)
      .css('flex', flex);
  }

  // support bookmarking of pages
  function handleLocationHash() {

    // restore tab/page from bookmark
    var hash = window.decodeURIComponent(window.location.hash);
    if (hash.length > 0)
      $('ul.nav a[href="' + hash + '"]').tab('show');
    FlexDashboardUtils.manageActiveNavbarMenu();

    // navigate to a tab when the history changes
    window.addEventListener("popstate", function(e) {
      var hash = window.decodeURIComponent(window.location.hash);
      var activeTab = $('ul.nav a[href="' + hash + '"]');
      if (activeTab.length) {
        activeTab.tab('show');
      } else {
        $('ul.nav a:first').tab('show');
      }
      FlexDashboardUtils.manageActiveNavbarMenu();
    });

    // add a hash to the URL when the user clicks on a tab/page
    $('.navbar-nav a[data-toggle="tab"]').on('click', function(e) {
      var baseUrl = FlexDashboardUtils.urlWithoutHash(window.location.href);
      var hash = FlexDashboardUtils.urlHash($(this).attr('href'));
      var href = baseUrl + hash;
      FlexDashboardUtils.setLocation(href);
    });

    // handle clicks of other links that should activate pages
    var navPages = $('ul.navbar-nav li a[data-toggle=tab]');
    navPages.each(function() {
      var href =  $(this).attr('href');
      var links = $('a[href="' + href + '"][data-toggle!=tab]');
      links.each(function() {
        $(this).on('click', function(e) {
          window.FlexDashboardUtils.showPage(href);
        });
      });
    });
  }

  // tweak Prism highlighting
  function initPrismHighlighting() {

    if (window.Prism) {
      Prism.languages.insertBefore('r', 'comment', {
        'heading': [
          {
            // title 1
        	  // =======

        	  // title 2
        	  // -------
        	  pattern: /\w+.*(?:\r?\n|\r)(?:====+|----+)/,
            alias: 'operator'
          },
          {
            // ### title 3
            pattern: /(^\s*)###[^#].+/m,
            lookbehind: true,
            alias: 'operator'
          }
        ]
      });

      // prism highlight
      Prism.highlightAll();
    }
  }


  // get theme color
  var themeColors = {
    bootstrap: {
      primary: "rgba(51, 122, 183, 0.4)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    cerulean: {
      primary: "rgb(47, 164, 231)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    journal: {
      primary: "rgba(235, 104, 100, 0.70)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    flatly: {
      primary: "rgba(44, 62, 80, 0.70)",
      info: "rgba(52, 152, 219, 0.70)",
      success: "rgba(24, 188, 156, 0.70)",
      warning: "rgba(243, 156, 18, 0.70)",
      danger: "rgba(231, 76, 60, 0.70)"
    },
    readable: {
      primary: "rgba(69, 130, 236, 0.4)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    spacelab: {
      primary: "rgba(68, 110, 155, 0.25)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    united: {
      primary: "rgba(221, 72, 20, 0.30)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    cosmo: {
      primary: "rgba(39, 128, 227, 0.7)",
      info: "rgba(153, 84, 187, 0.7)",
      success: "rgba(63, 182, 24, 0.7)",
      warning: "rgba(255, 117, 24, 0.7)",
      danger: "rgba(255, 0, 57, 0.7)"
    },
    lumen: {
      primary: "rgba(21, 140, 186, 0.70)",
      info: "rgba(117, 202, 235, 0.90)",
      success: "rgba(40, 182, 44, 0.70)",
      warning: "rgba(255, 133, 27, 0.70)",
      danger: "rgba(255, 65, 54, 0.70)"
    },
    paper: {
      primary: "rgba(33, 150, 243, 0.35)",
      info: "rgb(225, 190, 231)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(255, 224, 178)",
      danger: "rgb(249, 189, 187)"
    },
    sandstone: {
      primary: "rgba(50, 93, 136, 0.3)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    simplex: {
      primary: "rgba(217, 35, 15, 0.25)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    },
    yeti: {
      primary: "rgba(0, 140, 186, 0.298039)",
      info: "rgb(217, 237, 247)",
      success: "rgb(223, 240, 216)",
      warning: "rgb(252, 248, 227)",
      danger: "rgb(242, 222, 222)"
    }
  }
  function themeColor(color) {
    return themeColors[_options.theme][color];
  }

  FlexDashboard.prototype = {
    constructor: FlexDashboard,
    init: init,
    isMobilePhone: isMobilePhone,
    isFillPage: isFillPage,
    themeColor: themeColor
  };

  return FlexDashboard;

})();

// utils
window.FlexDashboardUtils = {
  resizableImage: function(img) {
    var src = img.attr('src');
    var url = 'url("' + src + '")';
    img.parent().css('background', url)
                .css('background-size', 'contain')
                .css('background-repeat', 'no-repeat')
                .css('background-position', 'center')
                .addClass('image-container');
  },
  setLocation: function(href) {
    if (history && history.pushState) {
      history.pushState(null, null, href);
    } else {
      window.location.replace(href);
    }
    setTimeout(function() {
        window.scrollTo(0, 0);
    }, 10);
    this.manageActiveNavbarMenu();
  },
  showPage: function(href) {
    $('ul.navbar-nav li a[href="' + href + '"]').tab('show');
    var baseUrl = this.urlWithoutHash(window.location.href);
    var loc = baseUrl + href;
    this.setLocation(loc);
  },
  showLinkedValue: function(href) {
    // check for a page link
    if ($('ul.navbar-nav li a[data-toggle=tab][href="' + href + '"]').length > 0)
      this.showPage(href);
    else
      window.open(href);
  },
  urlWithoutHash: function(url) {
    var hashLoc = url.indexOf('#');
    if (hashLoc != -1)
      return url.substring(0, hashLoc);
    else
      return url;
  },
  urlHash: function(url) {
    var hashLoc = url.indexOf('#');
    if (hashLoc != -1)
      return url.substring(hashLoc);
    else
      return "";
  },
  manageActiveNavbarMenu: function () {
    // remove active from anyone currently active
    $('.navbar ul.nav').find('li').removeClass('active');
    // find the active tab
    var activeTab = $('.dashboard-page-wrapper.tab-pane.active');
    if (activeTab.length > 0) {
      var tabId = activeTab.attr('id');
      if (tabId)
        $(".navbar ul.nav a[href='#" + tabId + "']").parents('li').addClass('active');
    }
  }
};

window.FlexDashboard = new FlexDashboard();

// empty content
window.FlexDashboardComponents.push({
  find: function(container) {
    if (container.find('p').length == 0)
      return container;
    else
      return $();
  }
})

// plot image
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('p')
                    .children('img:only-child');
  },

  layout: function(title, container, element, fillPage) {
    FlexDashboardUtils.resizableImage(element);
  }
});

// plot image (figure style)
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('div.figure').children('img');
  },

  layout: function(title, container, element, fillPage) {
    FlexDashboardUtils.resizableImage(element);
  }
});

// htmlwidget
window.FlexDashboardComponents.push({

  init: function(dashboardContainer) {
    // trigger "shown" after initial layout to force static htmlwidgets
    // in runtime: shiny to be resized after the dom has been transformed
    dashboardContainer.on('flexdashboard:layoutcomplete', function(event) {
      setTimeout(function() {
        dashboardContainer.trigger('shown');
      }, 200);
    });
  },

  find: function(container) {
    return container.children('div[id^="htmlwidget-"],div.html-widget');
  }
});

// gauge
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('div.html-widget.gauge');
  },

  flex: function(fillPage) {
    return false;
  },

  layout: function(title, container, element, fillPage) {


  }

});

// shiny output
window.FlexDashboardComponents.push({
  find: function(container) {
    return container.children('div[class^="shiny-"]');
  }
});

// datatables
window.FlexDashboardComponents.push({
  find: function(container) {
    return container.find('.datatables');
  },
  flex: function(fillPage) {
    return fillPage;
  }
});

// bootstrap table
window.FlexDashboardComponents.push({

  find: function(container) {
    var bsTable = container.find('table.table');
    if (bsTable.length !== 0)
      return bsTable;
    else
      return container.find('tr.header').parent('thead').parent('table');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {

    // alias variables
    var bsTable = element;

    // fixup xtable generated tables with a proper thead
    var headerRow = bsTable.find('tbody > tr:first-child > th').parent();
    if (headerRow.length > 0) {
      var thead = $('<thead></thead>');
      bsTable.prepend(thead);
      headerRow.detach().appendTo(thead);
    }

    // improve appearance
    container.addClass('bootstrap-table');

    // for fill page provide scrolling w/ sticky headers
    if (fillPage) {
      // force scrollbar on overflow
      container.addClass('flowing-content-shim');

      // stable table headers when scrolling
      bsTable.stickyTableHeaders({
        scrollableArea: container
      });
    }
  }
});

// embedded shiny app
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.find('iframe.shiny-frame');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {
    if (fillPage) {
      element.attr('height', '100%');
    } else {
      // provide default height if necessary
      var height = element.get(0).style.height;
      if (!height)
        height = element.attr('height');
      if (!height)
        element.attr('height', 500);
    }
  }
});

// shiny fillRow or fillCol
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.find('.flexfill-container');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {
    if (fillPage)
      element.css('height', '100%');
    else {
      // provide default height if necessary
      var height = element.get(0).style.height;
      if (height === "100%" || height === "auto" || height === "initial" ||
          height === "inherit" || !height) {
        element.css('height', 500);
      }
    }
  }
});

// valueBox
window.FlexDashboardComponents.push({

  type: "custom",

  find: function(container) {
    if (container.find('span.value-output, .shiny-valuebox-output').length)
      return container;
    else
      return $();
  },

  flex: function(fillPage) {
    return false;
  },

  layout: function(title, container, element, fillPage) {

    // alias variables
    var chartTitle = title;
    var valueBox = element;

    // add value-box class to container
    container.addClass('value-box');

    // value paragraph
    var value = $('<p class="value"></p>');

    // if we have shiny-text-output then just move it in
    var valueOutputSpan = [];
    var shinyOutput = valueBox.find('.shiny-valuebox-output').detach();
    if (shinyOutput.length) {
      valueBox.children().remove();
      shinyOutput.html("&mdash;");
      value.append(shinyOutput);
    } else {
      // extract the value (remove leading vector index)
      var chartValue = valueBox.text().trim();
      chartValue = chartValue.replace("[1] ", "");
      valueOutputSpan = valueBox.find('span.value-output').detach();
      valueBox.children().remove();
      value.text(chartValue);
    }

    // caption
    var caption = $('<p class="caption"></p>');
    caption.append(chartTitle);

    // build inner div for value box and add it
    var inner = $('<div class="inner"></div>');
    inner.append(value);
    inner.append(caption);
    valueBox.append(inner);

    // add icon if specified
    var icon = $('<div class="icon"><i></i></div>');
    valueBox.append(icon);
    function setIcon(chartIcon) {
      var iconLib = "";
      var iconSplit = chartIcon.split(" ");
      if (iconSplit.length > 1) {
        iconLib = iconSplit[0];
        chartIcon = iconSplit.slice(1).join(" ");
      } else {
        var components = chartIcon.split("-");
        if (components.length > 1)
          iconLib = components[0];
      }
      icon.children('i').attr('class', iconLib + ' ' + chartIcon);
    }
    var chartIcon = valueBox.attr('data-icon');
    if (chartIcon)
      setIcon(chartIcon);

    // set color based on data-background if necessary
    var dataBackground = valueBox.attr('data-background');
    if (dataBackground)
      valueBox.css('background-color', bgColor);
    else {
      // default to bg-primary if no other background is specified
      if (!valueBox.hasClass('bg-primary') &&
          !valueBox.hasClass('bg-info') &&
          !valueBox.hasClass('bg-warning') &&
          !valueBox.hasClass('bg-success') &&
          !valueBox.hasClass('bg-danger')) {
        valueBox.addClass('bg-primary');
      }
    }

    // handle data attributes in valueOutputSpan
    function handleValueOutput(valueOutput) {

      // caption
      var dataCaption = valueOutput.attr('data-caption');
      if (dataCaption)
        caption.html(dataCaption);

      // icon
      var dataIcon = valueOutput.attr('data-icon');
      if (dataIcon)
        setIcon(dataIcon);

      // color
      var dataColor = valueOutput.attr('data-color');
      if (dataColor) {
        if (dataColor.indexOf('bg-') === 0) {
          valueBox.css('background-color', '');
          if (!valueBox.hasClass(dataColor)) {
             valueBox.removeClass('bg-primary bg-info bg-warning bg-danger bg-success');
             valueBox.addClass(dataColor);
          }
        } else {
          valueBox.removeClass('bg-primary bg-info bg-warning bg-danger bg-success');
          valueBox.css('background-color', dataColor);
        }
      }

      // url
      var dataHref = valueOutput.attr('data-href');
      if (dataHref) {
        valueBox.addClass('linked-value');
        valueBox.off('click.value-box');
        valueBox.on('click.value-box', function(e) {
          window.FlexDashboardUtils.showLinkedValue(dataHref);
        });
      }
    }

    // check for a valueOutputSpan
    if (valueOutputSpan.length > 0) {
      handleValueOutput(valueOutputSpan);
    }

    // if we have a shinyOutput then bind a listener to handle
    // new valueOutputSpan values
    shinyOutput.on('shiny:value',
      function(event) {
        var element = $(event.target);
        setTimeout(function() {
          var valueOutputSpan = element.find('span.value-output');
          if (valueOutputSpan.length > 0)
            handleValueOutput(valueOutputSpan);
        }, 10);
      }
    );
  }
});
</script>

<div id="dashboard-container">

<div id="section-composite-scales" class="section level1">
<h1>Composite Scales</h1>
<div id="section-sidebar" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="variable">Select composite measure to explore</label>
<div>
<select id="variable"><option value="RECEP" selected>Tornado Warning Reception</option>
<option value="SUB_COM">Tornado Warning Comprehension (Subjective)</option>
<option value="OBJ_COM">Tornado Warning Comprehension (Objective)</option>
<option value="RESP">Tornado Warning Response</option>
<option value="EFFICAC">Efficacy of Protective Actions</option>
<option value="MYTH">Vulnerability to Tornado Myths</option></select>
<script type="application/json" data-for="variable" data-nonempty="">{}</script>
</div>
</div>
<p><strong>Instructions.</strong> Select a measure from the drop down menu (above) to see an <em>average person percentile (APP) rank</em> estimate for each County Warning Area (CWA). These estimates compare the average percentile rank of adults who live in a CWA to the distribution of adults in the US. For example, a APP rank estimate of 62 indicates that, on average, adults who live in that CWA are above the national average; they score higher than 62% of adults across the country. If you click on the map, a box will open that provides more information on the CWA, such as the percentile rank of the CWA in comparison to other CWAs. A plot will also come up below that maps the distribution of APP ranks by county within the CWA you select. <br/> <br/> <br/> <strong>Notes.</strong> The data for this project come from the University of Oklahoma Severe Weather and Society Survey (Wx Survey), a yearly survey of US adults that match the demographic characteristics of the US population. The statistics we present are estimates that we calculate using a small area estimation technique called Multilevel Regression and Postratification (MRP). Navigate to the <a href="https://crcm.shinyapps.io/WxDashExp/#section-about">About</a> tab to learn more about the project and the estimates. Click <a href="https://dataverse.harvard.edu/dataverse/wxsurvey">here</a> to access the survey data. <br/> <br/> <br/> Contact <a href="mailto:jtr@ou.edu">Joe Ripberger</a> or <a href="mailto:clsilva@ou.edu">Carol Silva</a> if you have questions about the data or project.</p>
</div>
<div id="section-row" class="section level2">
<h2>Row</h2>
<div id="section-estimates-by-nws-county-warning-area-cwa" class="section level3">
<h3>Estimates by NWS County Warning Area (CWA)</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-row-1" class="section level2">
<h2>Row</h2>
<div id="section-estimates-by-county-click-on-a-cwa-in-the-map-above" class="section level3">
<h3>Estimates by County (Click on a CWA in the Map Above)</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-survey-questions" class="section level3">
<h3>Survey Questions</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
</div>
<div id="section-risk-perceptions" class="section level1">
<h1>Risk Perceptions</h1>
<div id="section-sidebar-1" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="event">Select a type of event</label>
<div>
<select id="event"><option value="PER_HEA">Extreme Heat Waves</option>
<option value="PER_DRO" selected>Drought</option>
<option value="PER_COL">Extreme Cold Temperatures</option>
<option value="PER_SNO">Snow/Ice Storms</option>
<option value="PER_TOR">Tornados</option>
<option value="PER_FLO">Flooding</option>
<option value="PER_HUR">Hurricanes</option>
<option value="PER_FIR">Wildfires</option></select>
<script type="application/json" data-for="event" data-nonempty="">{}</script>
</div>
</div>
<p>Data on <strong>risk perceptions</strong> come from the following survey questions: Thinking about all four seasons (winter, summer, spring, and fall), how do you rate the risk of the following extreme weather events to you and the people in your area?</p>
<ul>
<li>Extreme heat waves</li>
<li>Droughts</li>
<li>Extreme cold temperatures</li>
<li>Extreme snow (or ice) storms</li>
<li>Tornadoes</li>
<li>Floods</li>
<li>Hurricanes</li>
<li>Wildfires</li>
</ul>
Data on <strong>event frequency</strong> come from NOAA Storm Events Database (<a href="https://www.ncdc.noaa.gov/stormevents/" class="uri">https://www.ncdc.noaa.gov/stormevents/</a>) and the US Drought Monitor (<a href="https://droughtmonitor.unl.edu" class="uri">https://droughtmonitor.unl.edu</a>). <br> <br> <br>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="cwa">Select a CWA to highlight</label>
<div>
<select id="cwa"><option value="ABR" selected>NWS Aberdeen, SD (ABR)</option>
<option value="ALY">NWS Albany, NY (ALY)</option>
<option value="ABQ">NWS Albuquerque, NM (ABQ)</option>
<option value="AMA">NWS Amarillo, TX (AMA)</option>
<option value="EWX">NWS Austin/San Antonio, TX (EWX)</option>
<option value="LWX">NWS Baltimore MD/Washington, DC (LWX)</option>
<option value="BYZ">NWS Billings, MT (BYZ)</option>
<option value="BGM">NWS Binghamton, NY (BGM)</option>
<option value="BMX">NWS Birmingham, AL (BMX)</option>
<option value="BIS">NWS Bismarck, ND (BIS)</option>
<option value="RNK">NWS Blacksburg, VA (RNK)</option>
<option value="BOI">NWS Boise, ID (BOI)</option>
<option value="BRO">NWS Brownsville, TX (BRO)</option>
<option value="BUF">NWS Buffalo, NY (BUF)</option>
<option value="BTV">NWS Burlington, VT (BTV)</option>
<option value="CAR">NWS Caribou, ME (CAR)</option>
<option value="CHS">NWS Charleston, SC (CHS)</option>
<option value="RLX">NWS Charleston, WV (RLX)</option>
<option value="CYS">NWS Cheyenne, WY (CYS)</option>
<option value="LOT">NWS Chicago, IL (LOT)</option>
<option value="CLE">NWS Cleveland, OH (CLE)</option>
<option value="CAE">NWS Columbia, SC (CAE)</option>
<option value="CRP">NWS Corpus Christi, TX (CRP)</option>
<option value="BOU">NWS Denver, CO (BOU)</option>
<option value="DMX">NWS Des Moines, IA (DMX)</option>
<option value="DTX">NWS Detroit/Pontiac, MI (DTX)</option>
<option value="DDC">NWS Dodge City, KS (DDC)</option>
<option value="DLH">NWS Duluth, MN (DLH)</option>
<option value="EPZ">NWS El Paso Tx/Santa Teresa, NM (EPZ)</option>
<option value="LKN">NWS Elko, NV (LKN)</option>
<option value="EKA">NWS Eureka, CA (EKA)</option>
<option value="FGZ">NWS Flagstaff, AZ (FGZ)</option>
<option value="FWD">NWS Fort Worth, TX (FWD)</option>
<option value="APX">NWS Gaylord, MI (APX)</option>
<option value="GGW">NWS Glasgow, MT (GGW)</option>
<option value="GLD">NWS Goodland, KS (GLD)</option>
<option value="FGF">NWS Grand Forks, ND (FGF)</option>
<option value="GJT">NWS Grand Junction, CO (GJT)</option>
<option value="GRR">NWS Grand Rapids, MI (GRR)</option>
<option value="GYX">NWS Gray, ME (GYX)</option>
<option value="TFX">NWS Great Falls, MT (TFX)</option>
<option value="GRB">NWS Green Bay, WI (GRB)</option>
<option value="GSP">NWS Greenville-Spartanburg, SC (GSP)</option>
<option value="HNX">NWS Hanford, CA (HNX)</option>
<option value="GID">NWS Hastings, NE (GID)</option>
<option value="HGX">NWS Houston/Galveston, TX (HGX)</option>
<option value="HUN">NWS Huntsville, AL (HUN)</option>
<option value="IND">NWS Indianapolis, IN (IND)</option>
<option value="JKL">NWS Jackson, KY (JKL)</option>
<option value="JAN">NWS Jackson, MS (JAN)</option>
<option value="JAX">NWS Jacksonville, FL (JAX)</option>
<option value="EAX">NWS Kansas City/Pleasant Hill, MO (EAX)</option>
<option value="KEY">NWS Key West, FL (KEY)</option>
<option value="ARX">NWS La Crosse, WI (ARX)</option>
<option value="LCH">NWS Lake Charles, LA (LCH)</option>
<option value="VEF">NWS Las Vegas, NV (VEF)</option>
<option value="ILX">NWS Lincoln, IL (ILX)</option>
<option value="LZK">NWS Little Rock, AR (LZK)</option>
<option value="LOX">NWS Los Angeles/Oxnard, CA (LOX)</option>
<option value="LMK">NWS Louisville, KY (LMK)</option>
<option value="LUB">NWS Lubbock, TX (LUB)</option>
<option value="MQT">NWS Marquette, MI (MQT)</option>
<option value="MFR">NWS Medford, OR (MFR)</option>
<option value="MLB">NWS Melbourne, FL (MLB)</option>
<option value="MEG">NWS Memphis, TN (MEG)</option>
<option value="MFL">NWS Miami, FL (MFL)</option>
<option value="MAF">NWS Midland/Odessa, TX (MAF)</option>
<option value="MKX">NWS Milwaukee/Sullivan, WI (MKX)</option>
<option value="MSO">NWS Missoula, MT (MSO)</option>
<option value="MOB">NWS Mobile, AL (MOB)</option>
<option value="MRX">NWS Morristown, TN (MRX)</option>
<option value="PHI">NWS Mount Holly, NJ (PHI)</option>
<option value="OHX">NWS Nashville, TN (OHX)</option>
<option value="LIX">NWS New Orleans, LA (LIX)</option>
<option value="MHX">NWS Newport/Morehead City, NC (MHX)</option>
<option value="OUN">NWS Norman, OK (OUN)</option>
<option value="LBF">NWS North Platte, NE (LBF)</option>
<option value="IWX">NWS Northern Indiana, IN (IWX)</option>
<option value="BOX">NWS Norton, MA (BOX)</option>
<option value="OAX">NWS Omaha/Valley, NE (OAX)</option>
<option value="PAH">NWS Paducah, KY (PAH)</option>
<option value="FFC">NWS Peachtree City, GA (FFC)</option>
<option value="PDT">NWS Pendleton, OR (PDT)</option>
<option value="PSR">NWS Phoenix, AZ (PSR)</option>
<option value="PBZ">NWS Pittsburgh, PA (PBZ)</option>
<option value="PIH">NWS Pocatello, ID (PIH)</option>
<option value="PQR">NWS Portland, OR (PQR)</option>
<option value="PUB">NWS Pueblo, CO (PUB)</option>
<option value="DVN">NWS Quad Cities, IL (DVN)</option>
<option value="RAH">NWS Raleigh, NC (RAH)</option>
<option value="UNR">NWS Rapid City, SD (UNR)</option>
<option value="REV">NWS Reno, NV (REV)</option>
<option value="RIW">NWS Riverton, WY (RIW)</option>
<option value="STO">NWS Sacramento, CA (STO)</option>
<option value="SLC">NWS Salt Lake City, UT (SLC)</option>
<option value="SJT">NWS San Angelo, TX (SJT)</option>
<option value="SGX">NWS San Diego, CA (SGX)</option>
<option value="MTR">NWS San Francisco, CA (MTR)</option>
<option value="SEW">NWS Seattle, WA (SEW)</option>
<option value="SHV">NWS Shreveport, LA (SHV)</option>
<option value="FSD">NWS Sioux Falls, SD (FSD)</option>
<option value="OTX">NWS Spokane, WA (OTX)</option>
<option value="SGF">NWS Springfield, MO (SGF)</option>
<option value="LSX">NWS St Louis, MO (LSX)</option>
<option value="CTP">NWS State College, PA (CTP)</option>
<option value="TAE">NWS Tallahassee, FL (TAE)</option>
<option value="TBW">NWS Tampa Bay Ruskin, FL (TBW)</option>
<option value="TOP">NWS Topeka, KS (TOP)</option>
<option value="TWC">NWS Tucson, AZ (TWC)</option>
<option value="TSA">NWS Tulsa, OK (TSA)</option>
<option value="MPX">NWS Twin Cities/Chanhassen, MN (MPX)</option>
<option value="OKX">NWS Upton, NY (OKX)</option>
<option value="AKQ">NWS Wakefield, VA (AKQ)</option>
<option value="ICT">NWS Wichita, KS (ICT)</option>
<option value="ILM">NWS Wilmington, NC (ILM)</option>
<option value="ILN">NWS Wilmington, OH (ILN)</option></select>
<script type="application/json" data-for="cwa" data-nonempty="">{}</script>
</div>
</div>
</div>
<div id="section-row-2" class="section level2">
<h2>Row</h2>
<div id="section-subjective-risk-perceptions-from-survey-data" class="section level3">
<h3>Subjective Risk Perceptions from Survey Data</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-objective-event-frequency-from-noaa-storm-data" class="section level3">
<h3>Objective Event Frequency from NOAA Storm Data</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-row-3" class="section level2">
<h2>Row</h2>
<div id="section-subjective-risk-perceptions-vs.-objective-event-frequency-by-cwa" class="section level3">
<h3>Subjective Risk Perceptions vs. Objective Event Frequency by CWA</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
</div>
<div id="section-information-sources" class="section level1">
<h1>Information Sources</h1>
<div id="section-sidebar-2" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<p><div class="form-group shiny-input-container">
<label class="control-label" for="att">Select a grouping</label>
<div>
<select id="att"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="att" data-nonempty="">{}</script>
</div>
</div><div class="form-group shiny-input-container">
<div class="checkbox">
<label>
<input id="check" type="checkbox"/>
<span>Show text labels?</span>
</label>
</div>
</div></p>
<p>These data come from WX17, WX18 &amp; WX19. Review the <a href="http://risk.ou.edu/downloads/news/WX18-Reference-Report.pdf">reference reports</a> for more information and complete question wording.</p>
</div>
<div id="section-row-4" class="section level2">
<h2>Row</h2>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-experiments" class="section level1">
<h1>Experiments</h1>
<div id="section-row-5" class="section level2 tabset" data-height="1000">
<h2>Row</h2>
<div id="section-probability-language" class="section level3">
<h3>Probability Language</h3>
<p>This experiment explores public perceptions about the words and phrases that forecasters commonly use to communicate probability. The data come from WX18 &amp; WX19. Review the <a href="http://risk.ou.edu/downloads/news/WX18-Reference-Report.pdf">reference reports</a> for more information and complete question wording. Some key findings from this experiment include:</p>
<ul>
<li>Public interpretations of probabilistic words and phrases are very inconsistent.</li>
<li>Forecasters can reduce this inconsistency by including basic qualifying expressions:
<ul>
<li>Phrases like <strong><em>there is a low chance of severe thunderstorms</em></strong> generate more consistant interpretations than phases like <strong><em>severe thunderstorms are possible</em></strong>.</li>
</ul></li>
</ul>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="prob_event">Select an event type</label>
<div>
<select id="prob_event"><option value="Severe Thunderstorms" selected>Severe Thunderstorms</option>
<option value="Tornadoes">Tornadoes</option></select>
<script type="application/json" data-for="prob_event" data-nonempty="">{}</script>
</div>
</div>
<p>Forecasters use different phrases to explain the possibility that [severe thunderstorms|tornadoes] will happen. When you see the following phrases, what percent chance comes to mind?</p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-probability-vs.-impact" class="section level3">
<h3>Probability vs. Impact</h3>
<p>This experiment examines the relative influence of forecast storm intensity (impact) vs. probability on public judgement of tornado risk. The data come from WX17. Review the <a href="http://risk.ou.edu/downloads/news/WX17-Reference-Report.pdf">reference report</a> for more information and complete question wording. Some key findings from this experiment include:</p>
<ul>
<li>Both forecast intensity and probability information affect public risk assessments.</li>
<li>On average, people are slightly more sensitive to probability information than intensity information.</li>
<li>Different groups of people use this information in different ways. For example, groups with high numeracy (risk literacy) are more likely to rely on information about intensity and probability when assessing risk than groups with low numeracy.</li>
</ul>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="neg_group">Select a grouping</label>
<div>
<select id="neg_group"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="neg_group" data-nonempty="">{}</script>
</div>
</div>
<p>We would like to know how YOU weigh the probability and intensity of extreme weather events. Please rate the risk of the following tornado scenarios: A [5:100]% chance of a [Light (EF-0)|Moderate (EF-1)|Significant (EF-2)|Severe (EF-3)|Devastating (EF-4)|Incredible (EF-5)] tornado.</p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-risk-categories" class="section level3">
<h3>Risk Categories</h3>
<p>This experiment examines public perceptions about the risk phrases (categories) that some forecasters use to communicate the probability of tornadoes. The data come from WX19. Review the <a href="http://risk.ou.edu/downloads/news/WX19-Reference-Report.pdf">reference report</a> for more information and complete question wording. Some key findings from this experiment include:</p>
<ul>
<li>Public perceptions of probability and risk are somewhat inconsistent with these risk categories.
<ul>
<li>People may misinterpret forecast probability and risk if given a risk category alone with no more information.</li>
</ul></li>
<li>The most common sources of confusion are <strong><em>marginal vs. slight</em></strong> and <strong><em>enhanced vs. moderate</em></strong> risk.</li>
<li>Different groups of people interpret probability and risk phrases in different ways.</li>
</ul>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="spc_group">Select a grouping</label>
<div>
<select id="spc_group"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="spc_group" data-nonempty="">{}</script>
</div>
</div>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-warning-perceptions-preferences" class="section level3">
<h3>Warning Perceptions &amp; Preferences</h3>
<p>This experiment explores public perceptions and preferences about common trade offs that forecasters make when issuing warnings. The data come from WX17. Review the <a href="http://risk.ou.edu/downloads/news/WX17-Reference-Report.pdf">reference report</a> for more information and complete question wording. Some key findings from this experiment include:</p>
<ul>
<li>People generally agree with the ways that forecasters are balancing trade offs.</li>
<li>On average, people seem to value:
<ul>
<li>Event detection and warning at the possible expense of more false alarms.</li>
<li>Forecast accuracy at the possible expense of less notice (lead time).</li>
<li>More information at the possible expense of too much complexity.</li>
</ul></li>
</ul>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="trade_group">Select a grouping</label>
<div>
<select id="trade_group"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="trade_group" data-nonempty="">{}</script>
</div>
</div>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="section-warning-time-of-day" class="section level3">
<h3>Warning Time of Day</h3>
<p>This experiment explores the impact of time of day on tornado reception, understanding, and/or responsiveness. The data come from WX18 &amp; WX19. Review the <a href="http://risk.ou.edu/downloads/news/WX19-Reference-Report.pdf">reference report</a> for more information and complete question wording. Some key findings from this experiment include:</p>
<ul>
<li>Time of day has a relatively strong impact on public confidence in warning reception, understanding, and response.</li>
<li>Warning reception and response are especially sensitive to time of day.
<ul>
<li>People are least confident that they with get and take protective action in response to tornado warnings in late evening and early morning hours.</li>
</ul></li>
</ul>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="time_group">Select an hour of the day</label>
<input class="js-range-slider" id="time_group" data-min="0" data-max="23" data-from="12" data-step="1" data-grid="true" data-grid-num="7.66666666666667" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number"/>
</div>
<p>For some people the time of day influences tornado warning reception, understanding, and/or responsiveness. If a tornado WARNING were issued for your area tomorrow at [TIME], how confident are you that you would [receive|understand|take protective action in response to] the warning?</p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
</div>
<div id="section-explore-survey" class="section level1">
<h1>Explore Survey</h1>
<div id="section-sidebar-3" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<p><div class="form-group shiny-input-container">
<label class="control-label" for="exp_variable">Select a variable</label>
<div>
<select id="exp_variable"><option value="aff_act">aff_act</option>
<option value="aff_afr">aff_afr</option>
<option value="aff_ale">aff_ale</option>
<option value="aff_att">aff_att</option>
<option value="aff_dis">aff_dis</option>
<option value="aff_ecx">aff_ecx</option>
<option value="aff_ent">aff_ent</option>
<option value="aff_int">aff_int</option>
<option value="aff_jit">aff_jit</option>
<option value="aff_ner">aff_ner</option>
<option value="aff_sca">aff_sca</option>
<option value="aff_ups">aff_ups</option>
<option value="alert_und">alert_und</option>
<option value="covid_attention">covid_attention</option>
<option value="covid_respond">covid_respond</option>
<option value="covid_risk">covid_risk</option>
<option value="do_right">do_right</option>
<option value="em_trust">em_trust</option>
<option value="fam_trust">fam_trust</option>
<option value="ffd_und">ffd_und</option>
<option value="ffd_watchwarn_und">ffd_watchwarn_und</option>
<option value="follow" selected>follow</option>
<option value="inc_100">inc_100</option>
<option value="inc_150">inc_150</option>
<option value="inc_200">inc_200</option>
<option value="inc_50">inc_50</option>
<option value="inc_next">inc_next</option>
<option value="income">income</option>
<option value="last_act">last_act</option>
<option value="last_act_again">last_act_again</option>
<option value="last_act_satis">last_act_satis</option>
<option value="leadtime_do">leadtime_do</option>
<option value="leadtime_should">leadtime_should</option>
<option value="loc_gov">loc_gov</option>
<option value="long_forcast">long_forcast</option>
<option value="lotv_trust">lotv_trust</option>
<option value="mi_fa_do">mi_fa_do</option>
<option value="mi_fa_should">mi_fa_should</option>
<option value="mob_down">mob_down</option>
<option value="mob_paid">mob_paid</option>
<option value="mob_paidwx">mob_paidwx</option>
<option value="myth_brdge">myth_brdge</option>
<option value="myth_mtns">myth_mtns</option>
<option value="myth_open">myth_open</option>
<option value="myth_tall">myth_tall</option>
<option value="myth_under">myth_under</option>
<option value="natv_trust">natv_trust</option>
<option value="next_act_night">next_act_night</option>
<option value="nws_trust">nws_trust</option>
<option value="oft_FB">oft_FB</option>
<option value="oft_twit">oft_twit</option>
<option value="plan_around">plan_around</option>
<option value="pol_ideol">pol_ideol</option>
<option value="pol_party">pol_party</option>
<option value="prc_1">prc_1</option>
<option value="prc_2">prc_2</option>
<option value="prc_3">prc_3</option>
<option value="prc_4">prc_4</option>
<option value="prc_5">prc_5</option>
<option value="probintens">probintens</option>
<option value="public_ability">public_ability</option>
<option value="rec_all">rec_all</option>
<option value="rec_area">rec_area</option>
<option value="rec_driving">rec_driving</option>
<option value="rec_large_group">rec_large_group</option>
<option value="rec_miss">rec_miss</option>
<option value="rec_most">rec_most</option>
<option value="rec_sleep">rec_sleep</option>
<option value="rec_small_group">rec_small_group</option>
<option value="rec_soon">rec_soon</option>
<option value="rec_store">rec_store</option>
<option value="rec_stream">rec_stream</option>
<option value="rec_time">rec_time</option>
<option value="rec_work">rec_work</option>
<option value="rel_1">rel_1</option>
<option value="rel_2">rel_2</option>
<option value="rel_3">rel_3</option>
<option value="rel_4">rel_4</option>
<option value="resp_busy">resp_busy</option>
<option value="resp_driving">resp_driving</option>
<option value="resp_ignore">resp_ignore</option>
<option value="resp_large_group">resp_large_group</option>
<option value="resp_prot">resp_prot</option>
<option value="resp_sleep">resp_sleep</option>
<option value="resp_small_group">resp_small_group</option>
<option value="resp_store">resp_store</option>
<option value="resp_unsure">resp_unsure</option>
<option value="resp_work">resp_work</option>
<option value="risk_cold">risk_cold</option>
<option value="risk_drought">risk_drought</option>
<option value="risk_fire">risk_fire</option>
<option value="risk_flood">risk_flood</option>
<option value="risk_heat">risk_heat</option>
<option value="risk_hur">risk_hur</option>
<option value="risk_rain">risk_rain</option>
<option value="risk_snow">risk_snow</option>
<option value="risk_tor">risk_tor</option>
<option value="risk_wind">risk_wind</option>
<option value="rq_1">rq_1</option>
<option value="rq_10">rq_10</option>
<option value="rq_2">rq_2</option>
<option value="rq_3">rq_3</option>
<option value="rq_4">rq_4</option>
<option value="rq_5">rq_5</option>
<option value="rq_6">rq_6</option>
<option value="rq_7">rq_7</option>
<option value="rq_8">rq_8</option>
<option value="rq_9">rq_9</option>
<option value="state_gov">state_gov</option>
<option value="svr_flood">svr_flood</option>
<option value="svr_hail">svr_hail</option>
<option value="svr_lightning">svr_lightning</option>
<option value="svr_rain">svr_rain</option>
<option value="svr_watchwarn_und">svr_watchwarn_und</option>
<option value="svr_wind">svr_wind</option>
<option value="tor_damage">tor_damage</option>
<option value="tor_eff1">tor_eff1</option>
<option value="tor_eff2">tor_eff2</option>
<option value="tor_eff3">tor_eff3</option>
<option value="tor_eff4">tor_eff4</option>
<option value="tor_eff5">tor_eff5</option>
<option value="tor_eff6">tor_eff6</option>
<option value="tor_eff7">tor_eff7</option>
<option value="tor_eff8">tor_eff8</option>
<option value="tor_map_und">tor_map_und</option>
<option value="tor_number">tor_number</option>
<option value="tor_radar_und">tor_radar_und</option>
<option value="tor_watchwarn_und">tor_watchwarn_und</option>
<option value="torwarn">torwarn</option>
<option value="torwatch">torwatch</option>
<option value="transp_accidents">transp_accidents</option>
<option value="transp_closures">transp_closures</option>
<option value="transp_delay">transp_delay</option>
<option value="transp_qual">transp_qual</option>
<option value="transp_spend">transp_spend</option>
<option value="trust_acc">trust_acc</option>
<option value="trust_comp">trust_comp</option>
<option value="trust_facc">trust_facc</option>
<option value="trust_loc">trust_loc</option>
<option value="trust_simp">trust_simp</option>
<option value="trust_soc">trust_soc</option>
<option value="uncert_do">uncert_do</option>
<option value="uncert_should">uncert_should</option>
<option value="und_weather">und_weather</option>
<option value="warn_hist">warn_hist</option>
<option value="warn_how_br_rad">warn_how_br_rad</option>
<option value="warn_how_int">warn_how_int</option>
<option value="warn_how_phone">warn_how_phone</option>
<option value="warn_how_siren">warn_how_siren</option>
<option value="warn_how_soc">warn_how_soc</option>
<option value="warn_how_tv">warn_how_tv</option>
<option value="warn_how_word">warn_how_word</option>
<option value="warn_how_wx_rad">warn_how_wx_rad</option>
<option value="warn_iss">warn_iss</option>
<option value="warn_size">warn_size</option>
<option value="warn_sure">warn_sure</option>
<option value="warn_time">warn_time</option>
<option value="warn_timercv">warn_timercv</option>
<option value="warn_tor">warn_tor</option>
<option value="warn_when">warn_when</option>
<option value="warn_where">warn_where</option>
<option value="watch_size">watch_size</option>
<option value="watch_time">watch_time</option>
<option value="wthr_info_cabtv">wthr_info_cabtv</option>
<option value="wthr_info_fam">wthr_info_fam</option>
<option value="wthr_info_govweb">wthr_info_govweb</option>
<option value="wthr_info_loctv">wthr_info_loctv</option>
<option value="wthr_info_paper">wthr_info_paper</option>
<option value="wthr_info_phone">wthr_info_phone</option>
<option value="wthr_info_radio">wthr_info_radio</option>
<option value="wthr_info_soc">wthr_info_soc</option>
<option value="wthr_info_web">wthr_info_web</option>
<option value="wx_info1">wx_info1</option>
<option value="wx_info2">wx_info2</option>
<option value="wx_info3">wx_info3</option>
<option value="wx_info4">wx_info4</option>
<option value="wx_info5">wx_info5</option>
<option value="wx_info6">wx_info6</option>
<option value="wx_info7">wx_info7</option>
<option value="wx_info8">wx_info8</option>
<option value="your_ability">your_ability</option></select>
<script type="application/json" data-for="exp_variable" data-nonempty="">{}</script>
</div>
</div><div class="form-group shiny-input-container">
<label class="control-label" for="exp_group">Select a grouping</label>
<div>
<select id="exp_group"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="exp_group" data-nonempty="">{}</script>
</div>
</div></p>
</div>
<div id="section-row-6" class="section level2">
<h2>Row</h2>
<div id="section-distribution" class="section level3">
<h3>Distribution</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-row-7" class="section level2">
<h2>Row</h2>
<div id="section-data-dictionary" class="section level3">
<h3>Data Dictionary</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div id="htmlwidget-9ef4b1362ab4b09b4d17" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9ef4b1362ab4b09b4d17">{"x":{"style":"bootstrap","filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","fillContainer":true,"data":[["follow","plan_around","und_weather","risk_wind","risk_rain","risk_heat","risk_drought","risk_cold","risk_snow","risk_tor","risk_flood","risk_hur","risk_fire","alert_und","torwatch","torwarn","warn_time","warn_size","watch_time","watch_size","svr_hail","svr_wind","svr_lightning","svr_flood","svr_rain","rec_all","rec_soon","rec_miss","rec_area","rec_time","warn_hist","warn_when","warn_how_br_rad","warn_how_wx_rad","warn_how_tv","warn_how_siren","warn_how_int","warn_how_soc","warn_how_word","warn_how_phone","warn_timercv","warn_where","warn_iss","warn_sure","last_act","next_act_night","resp_ignore","resp_prot","resp_busy","resp_unsure","mi_fa_should","mi_fa_do","leadtime_should","leadtime_do","uncert_should","uncert_do","nws_trust","lotv_trust","natv_trust","em_trust","fam_trust","wx_info1","wx_info2","wx_info3","wx_info4","wx_info5","wx_info6","wx_info7","wx_info8","tor_damage","tor_number","myth_under","myth_tall","myth_mtns","myth_brdge","myth_open","probintens","mob_down","mob_paid","mob_paidwx","aff_int","aff_dis","aff_ecx","aff_ups","aff_sca","aff_ent","aff_ale","aff_ner","aff_att","aff_jit","aff_act","aff_afr","do_right","state_gov","loc_gov","pol_party","pol_ideol","income","inc_50","inc_100","inc_150","inc_200","oft_twit","oft_FB","tor_watchwarn_und","tor_map_und","tor_radar_und","svr_watchwarn_und","rec_most","rec_sleep","rec_driving","rec_work","rec_store","rec_small_group","rec_large_group","warn_tor","last_act_satis","last_act_again","resp_sleep","resp_driving","resp_work","resp_store","resp_small_group","resp_large_group","tor_eff1","tor_eff2","tor_eff3","tor_eff4","tor_eff5","tor_eff6","tor_eff7","tor_eff8","transp_delay","transp_closures","transp_accidents","transp_qual","transp_spend","rel_1","rel_2","rel_3","rel_4","wthr_info_paper","wthr_info_web","wthr_info_govweb","wthr_info_loctv","wthr_info_cabtv","wthr_info_radio","wthr_info_fam","wthr_info_soc","wthr_info_phone","ffd_und","ffd_watchwarn_und","rec_stream","trust_facc","trust_loc","trust_simp","trust_comp","trust_soc","trust_acc","prc_1","prc_2","prc_3","prc_4","prc_5","rq_1","rq_2","rq_3","rq_4","rq_5","rq_6","rq_7","rq_8","rq_9","rq_10","long_forcast","covid_risk","covid_attention","covid_respond","your_ability","public_ability","inc_next"],["I follow the weather very closely.","I plan my daily routine around the weather.","I don't understand what causes extreme weather events like thunderstorms, tornadoes, and hurricanes.","Extreme high winds","Extreme rain storms","Extreme heat waves","Droughts","Extreme cold temperatures","Extreme snow (or ice) storms","Tornadoes","Floods","Hurricanes","Wildfires","In general, do you understand the difference between watches and warnings?","This alert is issued when severe thunderstorms and tornadoes are possible in and near the area. It does not mean that they will occur. It only means they are possible.","This alert is used when a tornado is imminent. When this alert is issued, seek safe shelter immediately.","If the National Weather Service issues a tornado WARNING for your area, how much time do you have before the tornado arrives?","Approximately how large is the area included in an average tornado WARNING?","If the National Weather Service issues a tornado WATCH for your area, how much time do you have before the tornado arrives?","Approximately how large is the area included in an average tornado WATCH?","To the best of your knowledge, which of the following hazards does the National Weather Service consider when issuing SEVERE THUNDERSTORM WARNINGS? Large hail","To the best of your knowledge, which of the following hazards does the National Weather Service consider when issuing SEVERE THUNDERSTORM WARNINGS? High winds","To the best of your knowledge, which of the following hazards does the National Weather Service consider when issuing SEVERE THUNDERSTORM WARNINGS? Lightning","To the best of your knowledge, which of the following hazards does the National Weather Service consider when issuing SEVERE THUNDERSTORM WARNINGS? Flooding","To the best of your knowledge, which of the following hazards does the National Weather Service consider when issuing SEVERE THUNDERSTORM WARNINGS? Extreme rainfall","I receive all tornado warnings that are issued for my area.","I receive tornado warnings as soon as they are issued for my area.","Sometimes I miss tornado warnings that are issued for my area","Sometimes I am not sure if a tornado warning is for my area or a different area.","Sometimes I am not sure what time tornado warnings begin and end for my area.","Do you recall having ever received a tornado WARNING for your area?","When did you receive the tornado warning?","Broadcast radio","Weather radio (National Weather Service radio)","Television","Siren or other alarm","Internet","Social media such as Twitter or Facebook","Word-of-mouth (including telephone or text messages, email, etc.) from family, friends, neighbors, employers, co-workers, etc.","Automated text or phone notification","What time was it when you received the tornado warning?","Where were you when you received the tornado warning?","Did you receive the tornado warning as soon as it was issued?","Were you sure that the tornado warning was for your area and not a different area?","What did you do when you got the most recent tornado warning that you remember receiving?","If you are at home in the middle of the night and you receive a tornado warning for your area, what do you plan to do?","Sometimes I ignore tornado warnings that are issued for my area.","I always take protective action when tornado warnings are issued for my area.","Sometimes I am too busy to take protective action when tornado warnings are issued for my area.","I am not sure what to do when tornado warnings are issued for my area.","In your opinion, how SHOULD forecasters in your area balance the possibility of false alarms vs. the possibility that a tornado will occur without a warning?","In your opinion, how DO forecasters in your area currently balance the possibility of false alarms vs. the possibility that a tornado will occur without a warning?","In your opinion, how SHOULD forecasters in your area balance considerations of lead time vs. accuracy?","In your opinion, how DO forecasters in your area balance considerations of lead time vs. accuracy?","In your opinion, how SHOULD forecasters in your area balance considerations of simplicity vs. more information?","In your opinion, how DO forecasters in your area balance considerations of simplicity vs. more information?","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: The National Weather Service","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: Regional or local TV stations","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: National TV stations (like the Weather Channel)","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: State or local emergency managers","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: Family, friends, neighbors, employers, co-workers, etc.","How much do you, personally, rely on each of the following sources of information about extreme weather? Broadcast radio","How much do you, personally, rely on each of the following sources of information about extreme weather? Weather radio (National Weather Service radio)","How much do you, personally, rely on each of the following sources of information about extreme weather? Television","How much do you, personally, rely on each of the following sources of information about extreme weather? Internet web pages focused on weather forecasts, such as those provided by the National Weather Service","How much do you, personally, rely on each of the following sources of information about extreme weather? Social media, such as Twitter or Facebook","How much do you, personally, rely on each of the following sources of information about extreme weather? Word-of-mouth (including telephone calls or texts) from family, friends, neighbors, employers, co-workers, etc.","How much do you, personally, rely on each of the following sources of information about extreme weather? Automated text or phone notifications","How much do you, personally, rely on each of the following sources of information about extreme weather? Outdoor warning sirens","If you had to guess, how intense are most tornadoes in [state]?","On average, how many tornadoes does [state] get each year?","You must be underground or in an aboveground tornado shelter to survive a devastating (EF-4) or incredible (EF-5) tornado [false]","Tall buildings protect large cities from tornadoes [false]","Mountains, rivers, and lakes do not protect nearby areas from tornadoes","When driving, you should not take shelter from tornadoes under a bridge or overpass","When sheltering in a house from a tornado, you should open all the windows to equalize the pressure inside and outside to prevent the house from exploding","When thinking about the risk of tornadoes, is probability (the likelihood that a tornado will occur) more important than intensity (the strength and size of the tornado)? Or, is intensity more important than probability?","Have you ever downloaded an application (mobile app) of any kind for a smart phone (such as an Android or iPhone)?","Have you ever paid for an application (mobile app) of any kind for a smart phone (such as an Android or iPhone)?","Have you ever paid for an application (mobile app) that provides information about the weather for a smart phone (such as an Android or iPhone)?","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Interested","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Distressed","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Excited","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Upset","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Scared","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Enthusiastic","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Alert","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Nervous","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Attentive","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Jittery","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Active","Imagine, for the moment, that you have just received a warning for your area for severe thunderstorms, tornadoes, hurricanes, or wildfires. How would getting that warning make you feel?) Afraid","On a scale from zero to ten, where zero means none of the time and ten means all of the time, how much of the time do you trust the federal government in Washington to do what is right for the American people?","On the same scale from zero to ten, how much of the time do you trust state government to do what is right for the people in [state]?","Again, on the same scale, how much of the time do you trust your county and local governments to do what is right for you and your fellow citizens in your local area?","With which political party do you most identify?","On a scale of political ideology, individuals can be arranged from strongly liberal to strongly conservative. Which of the following categories best describes your views?","Was the estimated annual income for your household in 2016|2017|2018|2019:","Was the estimated annual income for your household in 2016|2017|2018|2019:","Was the estimated annual income for your household in 2016|2017|2018|2019:","Was the estimated annual income for your household in 2016|2017|2018|2019:","Was the estimated annual income for your household in 2016|2017|2018|2019:","About how often do you use Twitter?","About how often do you use Facebook?","How would you rate your understanding of tornado watches and warnings?","Forecasters, websites, and phone applications often use maps to display tornado watches and warnings. How would you rate your understanding of maps?","Forecasters, websites, and phone applications also use radar images to communicate tornado risk. How would you rate your understanding of radar images?","How would you rate your understanding of severe thunderstorm WATCHES and WARNINGS?","I receive most tornado warnings that are issued for my area.","How confident are you that you would receive tornado warnings in the following situations? If you are sleeping?","How confident are you that you would receive tornado warnings in the following situations? If you are in the car?","How confident are you that you would receive tornado warnings in the following situations? If you are at work or school?","How confident are you that you would receive tornado warnings in the following situations? If you are at the store?","How confident are you that you would receive tornado warnings in the following situations? If you are with a small group of friends or family?","How confident are you that you would receive tornado warnings in the following situations? If you are with a large group of friends or family?","Did a tornado touch down in the tornado warning area?","Looking back, how would you rate your satisfaction with the action you took?","How likely is it that you would take the same action again if you were in the same situation in the future?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are sleeping?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are in a car?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are at work or school?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are at a store?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are with a small group friends or family?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are with a large group friends or family?","It is possible for most people in my area to prepare and to secure their property ahead of time for a tornado.","It is possible for most people in my area to develop a safety plan for how to deal with a tornado.","It is possible for most people in my area to protect themselves against a tornado.","It is possible for most people in my area to evacuate when necessary ahead of a tornado.","I feel that I can prepare and secure my property ahead of time for a tornado.","I have a safety plan for how to deal with a tornado.","I can protect myself against a tornado.","I can evacuate when necessary ahead of a tornado.","If you had to guess, about how many days in an average year do extreme weather events of any kind cause traffic delays in your local area?","If you had to guess, about how many days in an average year do extreme weather events of any kind cause road closures in your local area?","If you had to guess, about how many days in an average year do extreme weather events of any kind cause traffic accidents in your local area?","In your opinion, how vulnerable are the roads and bridges in your local area to extreme weather events of any kind?","In your opinion, should the government in your local area spend more, less, or about the same amount of money to improve the resilience of roads and bridges to extreme weather events of any kind?","I don't need to take protective action during disasters because I believe that God will protect me.","My actions during disasters don't matter because God has a plan for me.","I can control small things, but ultimately God has control of what happens to me during disasters.","I believe that God leaves it up to me make good decisions during disasters.","How frequently do you get information about the weather from each of the following sources: Newspaper","How frequently do you get information about the weather from each of the following sources: Non-government internet websites","How frequently do you get information about the weather from each of the following sources: Government internet websites","How frequently do you get information about the weather from each of the following sources: Local TV (television) news","How frequently do you get information about the weather from each of the following sources: Cable TV (television) news (such as The Weather Channel)","How frequently do you get information about the weather from each of the following sources: Radio","How frequently do you get information about the weather from each of the following sources: Family, friends, or colleagues","How frequently do you get information about the weather from each of the following sources: Social Media, such as Facebook and Twitter","How frequently do you get information about the weather from each of the following sources: Cell phone applications or automated text messages","The National Weather Service also issues alerts for flash floods. How would you rate your understanding of flash flood WATCHES and WARNINGS?","Do you understand the difference between floods and flash floods?","How confident are you that you would receive tornado warnings in the following situations? If you are watching a show or movie using an online streaming service like Netflix, Amazon Prime, or Hulu?","How important are the following factors to you? Forecast accuracy","How important are the following factors to you? Knowledge of my area","How important are the following factors to you? Simple communication","How important are the following factors to you? Comprehensive information","How important are the following factors to you? Friend/family recommendations","How important are the following factors to you? Easy access","Assuming no knowledge of a specific storm, on average what are the chances that a tornado will occur within 25 miles of your residence on any given day?","Assuming no knowledge of a specific storm, please select the forecast that indicates the highest chance that you will experience a tornado tomorrow. If the chances are equal, select option three.","Assuming no knowledge of a specific storm, please select the forecast that indicates the highest chance that you will experience a tornado tomorrow. If the chances are equal, select option three.","Imagine that forecasters believe there will be a severe thunderstorm in your area tomorrow afternoon that will cause flash flooding within 25 miles of your location. There is also a 1% chance that it will cause a tornado within 25 miles of your location. Which of the following events is more likely?","Imagine that you live in a place that gets an average of one day of rain each week. Assuming no knowledge of a specific storm, what are the chances that you will get rain on any given day of the week?","Does your local government have an emergency or disaster plan for your community?","Do you know how to find the emergency broadcasting channel on the radio?","In the past 30 days, have you seen or heard any messages that encourage people to take steps to be prepared for emergency situations in your community?","In the last year, have you prepared a Disaster Supply Kit with emergency supplies like water, food and medicine that is kept in a designated place in your home?","In the last year, have you prepared a small kit with emergency supplies that you keep at home, in your car or where you work to take with you if you had to leave quickly?","In the last year, have you made a specific plan for how you and your family would communicate in an emergency situation if you were separated?","In the last year, have you established a specific meeting place to reunite in the event you and your family cannot return home or are evacuated?","In the last year, have you practiced or drilled on what to do in an emergency at home?","In the last year, have you volunteered to help prepare for or respond to a major emergency?","Have you taken first aid training such as CPR in the past five years?","If you were to guess, about how far in advance can meteorologists accurately forecast daily temperatures and rain?","How do you rate the risk of COVID-19 in relation to extreme weather risks to you and the people in your area?","Do you pay less attention to extreme weather risks than you have in the past?","Do you think COVID-19 will make it more difficult for you and other people in your area to take protective action in response to future extreme weather events?","How would you rate your ability to calculate and interpret probabilities when making decisions?","How would you rate the ability of most people you know to calculate and interpret probabilities when making decisions?","Do you expect your estimated annual income for your household in 2020 to be…"],["1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = Definitely no; 2 = Probably no; 3 = Not sure; 4 = Probably yes; 5 = Definitely yes","1 = Tornado WATCH; 2 = Tornado WARNING; 3 = Don't know","1 = Tornado WATCH; 2 = Tornado WARNING; 3 = Don't know","1 = Less than 1 hour; 2 = 1 to 24 hours; 3 = 1 to 3 days; 4 = More than 3 days","1 = Around the size of a city; 2 = Around the size of a county; 3 = Around the size of multiple counties; 4 = Around the size of a state; 5 = Around the size of multiple states","1 = Less than 1 hour; 2 = 1 to 24 hours; 3 = 1 to 3 days; 4 = More than 3 days","1 = Around the size of a city; 2 = Around the size of a county; 3 = Around the size of multiple counties; 4 = Around the size of a state; 5 = Around the size of multiple states","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","0 = No; 1 = Yes","1 = Less than 1 month ago; 2 = Between 1 and 3 months ago; 3 = Between 3 and 12 months ago; 4 = Between 1 and 3 years ago; 5 = More than 3 years ago; 6 = I Don't recall","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","1 = Between 6am and noon; 2 = Between noon and 6pm; 3 = Between 6pm and midnight; 4 = Between midnight and 6am; 5 = I Don't recall","1 = At home; 2 = At work; 3 = At school; 4 = At a business (such as a store or restaurant); 5 = In a vehicle (such as a car, truck, or bus); 6 = Somewhere else (please specify); 7 = I Don't recall","0 = No; 1 = Yes; 2 = I Don't recall","0 = No; 1 = Yes; 2 = I Don't recall","0 = Nothing; continued my daily activities; 1 = Monitored the situation, but did not move to shelter; 2 = Moved to the most sheltered part of the building, but did not leave the building; 3 = Moved to a specially constructed storm shelter in the building; 4 = Moved to a nearby location or building that provided safer shelter; 5 = Left the building and drove away from the tornado warning area; 6 = Something else (please specify); 7 = I Don't recall","0 = Nothing; continued my daily activities; 1 = Monitored the situation, but did not move to shelter; 2 = Moved to the most sheltered part of the building, but did not leave the building; 3 = Moved to a specially constructed storm shelter in the building; 4 = Moved to a nearby location or building that provided safer shelter; 5 = Left the building and drove away from the tornado warning area; 6 = Something else (please specify); 7 = I Don't recall","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Minimize the possibility that a tornado will occur without a warning; 2 = Lean towards limiting the possibility that a tornado will occur without a warning; 3 = Lean towards limiting the possibility of false alarms; 4 = Minimize the possibility of false alarms","1 = Minimize the possibility that a tornado will occur without a warning; 2 = Lean towards limiting the possibility that a tornado will occur without a warning; 3 = Lean towards limiting the possibility of false alarms; 4 = Minimize the possibility of false alarms","1 = Maximize lead time; 2 = Lean towards more lead time; 3 = Lean towards more precision/accuracy; 4 = Maximize precision/accuracy","1 = Maximize lead time; 2 = Lean towards more lead time; 3 = Lean towards more precision/accuracy; 4 = Maximize precision/accuracy","1 = Maximize simplicity ; 2 = Lean towards simplicity; 3 = Lean towards more information; 4 = Maximize information","1 = Maximize simplicity ; 2 = Lean towards simplicity; 3 = Lean towards more information; 4 = Maximize information","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","0 = Light (EF-0); 1 = Moderate(EF-1); 2 = Significant (EF-2); 3 = Severe (EF-3); 4 = Devastating (EF-4); 5 = Incredible (EF-5)","1 = Less than 5; 2 = Between 5 and 24; 3 = Between 25 and 49; 4 = Between 50 and 100; 5 = More than 100","0 = False; 1 = True","0 = False; 1 = True","0 = False; 1 = True","0 = False; 1 = True","0 = False; 1 = True","1 = Probability is much more important than intensity; 2 = Probability is a little more important than intensity; 3 = Probability and intensity are equality important; 4 = Intensity is a little more important than probability; 5 = Intensity is much more important than probability","0 = No; 1 = Yes","0 = No; 1 = Yes","0 = No; 1 = Yes","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","1 = Not at all; 2 = A little; 3 = Moderately; 4 = Quite a bit; 5 = Extremely","0 = None of the time; 10 = All of the time","0 = None of the time; 10 = All of the time","0 = None of the time; 10 = All of the time","1 = Democratic party; 2 = Republican party (or GOP); 3 = Independent; 4 = Other (please specify)","1 = Strongly liberal; 2 = Liberal; 3 = Slightly liberal; 4 = Middle of the road; 5 = Slightly conservative; 6 = Conservative; 7 = Strongly conservative","1 = Less than $50,000; 2 = At least $50,000 but less than $100,000; 3 = At least $100,000 but less than $150,000; 4 = $150,000 or more","1 = Less than $10,000; 2 = $10,000 to less than $20,000; 3 = $20,000 to less than $30,000; 4 = $30,000 to less than $40,000; 5 = $40,000 to less than $50,000","6 = $50,000 to less than $60,000; 7 = $60,000 to less than $70,000; 8 = $70,000 to less than $80,000; 9 = $80,000 to less than $90,000; 10 = $90,000 to less than $100,000","11 = $100,000 to less than $110,000; 12 = $110,000 to less than $120,000; 13 = $120,000 to less than $130,000; 14 = $130,000 to less than $140,000; 15 = $140,000 to less than $150,000","16 = $150,000 to less than $160,000; 17 = $160,000 to less than $170,000; 18 = $170,000 to less than $180,000; 19 = $180,000 to less than $190,000; 20 = $190,000 to less than $200,000; 21 - $200,000 or more","0 = Never; 1 = Less than once a month; 2 = Several times a month; 3 = About once a week; 4 = Several times a week; 5 = Once or twice most days; 6 = Several times almost every day","0 = Never; 1 = Less than once a month; 2 = Several times a month; 3 = About once a week; 4 = Several times a week; 5 = Once or twice most days; 6 = Several times almost every day","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","0 = No; 1 = Yes; 2 = I Don't recall","1 = Very dissatisfied; 2 = Dissatisfied; 3 = Neither dissatisfied nor satisfied; 4 = Satisfied; 5 = Very satisfied","1 = Very unlikely; 2 = Somewhat unlikely; 3 = About as likely as not; 4 = Somewhat likely; 5 = Very likely","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Less than 5 days a year; 2 = 5 to 10 days a year; 3 = 11 to 20 days a year; 4 = More than 20 days a year","1 = Less than 5 days a year; 2 = 5 to 10 days a year; 3 = 11 to 20 days a year; 4 = More than 20 days a year","1 = Less than 5 days a year; 2 = 5 to 10 days a year; 3 = 11 to 20 days a year; 4 = More than 20 days a year","1 = Not at all vulnerable; 2 = Somewhat vulnerable; 3 = Vulnerable; 4 = Very vulnerable; 5 = Extremely vulnerable","1 = A lot less; 2 = A little less; 3 = About the same; 4 = A little more; 5 = A lot more","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Definitely no; 2 = Probably no; 3 = Not sure; 4 = Probably yes; 5 = Definitely yes","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Not at all important; 2 = Not very important; 3 = Somewhat important; 4 = Very important; 5 = Extremely important","1 = Less than 1%; 2 = Between 1% and 5%; 3 = Between 5% and 10%","1 = There is a 50% chance that a tornado will occur within 25 miles of your location tomorrow.; 2 = There is a 2% chance that a tornado will occur within 1 mile of your location tomorrow.; 3 = The forecasts are equal.","1 = There is a 70% chance that a severe thunderstorm will develop within 25 miles of your location tomorrow; if a severe thunderstorm develops, there is a 10% chance that a tornado will occur within 25 miles of your location.; 2 = There is a 2% chance that a tornado will occur within 25 miles of your location tomorrow.; 3 = The forecasts are equal.","1 = A tornado will occur in your area.; 2 = A flash flood and a tornado will occur in your area.","1 = Less than 10%; 2 = Between 10% and 20%; 3 = More than 20%","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","0 = No; 1 = Yes; 2 = Not sure","1 = 5 days or less; 2 = 7 days; 3 = 10 days; 4 = 2 weeks; 5 = 4 weeks; 6 = 8 weeks; 7 = 2 months or more","1 = The risk of COVID-19 is significantly lower than the risk of extreme weather; 2 = The risk of COVID-19 is lower than the risk of extreme weather; 3 = The risk are about the same; 4 = The risk of COVID-19 is higher than the risk of extreme weather; 5 = The risk of COVID-19 is significantly higher than the risk of extreme weather","1 = Definitely no; 2 = Probably no; 3 = Not sure; 4 = Probably yes; 5 = Definitely yes","1 = Definitely no; 2 = Probably no; 3 = Not sure; 4 = Probably yes; 5 = Definitely yes","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Less than it was in 2019; 2 = About the same as it was in 2019; 3 = More than it was in 2019"]],"container":"<table class=\"table table-condensed fill-container\">\n  <thead>\n    <tr>\n      <th>Question ID<\/th>\n      <th>Question Text<\/th>\n      <th>Response Options<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"width":"600","targets":2}],"dom":"Blrtip","order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="section-time-series" class="section level1">
<h1>Time Series</h1>
<div id="section-sidebar-4" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<p><div class="form-group shiny-input-container">
<label class="control-label" for="ts_meas">Select a measure</label>
<div>
<select id="ts_meas"><option value="follow" selected>follow</option>
<option value="plan_around">plan_around</option>
<option value="und_weather">und_weather</option>
<option value="risk_wind">risk_wind</option>
<option value="risk_rain">risk_rain</option>
<option value="risk_heat">risk_heat</option>
<option value="risk_drought">risk_drought</option>
<option value="risk_cold">risk_cold</option>
<option value="risk_snow">risk_snow</option>
<option value="risk_tor">risk_tor</option>
<option value="risk_flood">risk_flood</option>
<option value="risk_hur">risk_hur</option>
<option value="risk_fire">risk_fire</option>
<option value="alert_und">alert_und</option>
<option value="nws_trust">nws_trust</option>
<option value="lotv_trust">lotv_trust</option>
<option value="natv_trust">natv_trust</option>
<option value="em_trust">em_trust</option>
<option value="fam_trust">fam_trust</option>
<option value="wx_info1">wx_info1</option>
<option value="wx_info2">wx_info2</option>
<option value="wx_info3">wx_info3</option>
<option value="wx_info4">wx_info4</option>
<option value="wx_info5">wx_info5</option>
<option value="wx_info6">wx_info6</option>
<option value="wx_info7">wx_info7</option>
<option value="wx_info8">wx_info8</option>
<option value="tor_map_und">tor_map_und</option>
<option value="tor_radar_und">tor_radar_und</option>
<option value="svr_watchwarn_und">svr_watchwarn_und</option>
<option value="rec_all">rec_all</option>
<option value="rec_most">rec_most</option>
<option value="rec_soon">rec_soon</option>
<option value="rec_miss">rec_miss</option>
<option value="rec_area">rec_area</option>
<option value="rec_time">rec_time</option>
<option value="rec_sleep">rec_sleep</option>
<option value="rec_driving">rec_driving</option>
<option value="rec_work">rec_work</option>
<option value="rec_store">rec_store</option>
<option value="rec_small_group">rec_small_group</option>
<option value="rec_large_group">rec_large_group</option>
<option value="rec_stream">rec_stream</option>
<option value="resp_ignore">resp_ignore</option>
<option value="resp_prot">resp_prot</option>
<option value="resp_busy">resp_busy</option>
<option value="resp_unsure">resp_unsure</option>
<option value="resp_sleep">resp_sleep</option>
<option value="resp_driving">resp_driving</option>
<option value="resp_work">resp_work</option>
<option value="resp_store">resp_store</option>
<option value="resp_small_group">resp_small_group</option>
<option value="resp_large_group">resp_large_group</option>
<option value="resep_stream">resep_stream</option>
<option value="wthr_info_paper">wthr_info_paper</option>
<option value="wthr_info_web">wthr_info_web</option>
<option value="wthr_info_govweb">wthr_info_govweb</option>
<option value="wthr_info_loctv">wthr_info_loctv</option>
<option value="wthr_info_cabtv">wthr_info_cabtv</option>
<option value="wthr_info_radio">wthr_info_radio</option>
<option value="wthr_info_fam">wthr_info_fam</option>
<option value="wthr_info_soc">wthr_info_soc</option>
<option value="wthr_info_phone">wthr_info_phone</option>
<option value="recep">recep</option>
<option value="subj_comp">subj_comp</option>
<option value="obj_comp">obj_comp</option>
<option value="resp">resp</option></select>
<script type="application/json" data-for="ts_meas" data-nonempty="">{}</script>
</div>
</div><div class="form-group shiny-input-container">
<label class="control-label" for="ts_group">Select a grouping</label>
<div>
<select id="ts_group"><option value="All" selected>All</option>
<option value="Gender">Gender</option>
<option value="Ethnicity">Ethnicity</option>
<option value="Race">Race</option>
<option value="Age">Age Group</option>
<option value="Region">NWS Region</option>
<option value="Education">Education</option>
<option value="Numeracy">Numeracy</option>
<option value="Area">Geographic Area (Urban/Rural)</option>
<option value="Understanding">Understanding of Extreme Weather</option>
<option value="Year">Survey Year</option></select>
<script type="application/json" data-for="ts_group" data-nonempty="">{}</script>
</div>
</div><div class="form-group shiny-input-container">
<div class="checkbox">
<label>
<input id="scale" type="checkbox"/>
<span>Show text full y-scale?</span>
</label>
</div>
</div></p>
</div>
<div id="section-row-8" class="section level2">
<h2>Row</h2>
<div id="section-time-series-plot" class="section level3">
<h3>Time Series Plot</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-row-9" class="section level2">
<h2>Row</h2>
<div id="section-data-dictionary-1" class="section level3">
<h3>Data Dictionary</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div id="htmlwidget-b76f76f8e5e2679b3afe" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b76f76f8e5e2679b3afe">{"x":{"style":"bootstrap","filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","fillContainer":true,"data":[["follow","plan_around","und_weather","risk_wind","risk_rain","risk_heat","risk_drought","risk_cold","risk_snow","risk_tor","risk_flood","risk_hur","risk_fire","alert_und","rec_all","rec_soon","rec_miss","rec_area","rec_time","resp_ignore","resp_prot","resp_busy","resp_unsure","nws_trust","lotv_trust","natv_trust","em_trust","fam_trust","wx_info1","wx_info2","wx_info3","wx_info4","wx_info5","wx_info6","wx_info7","wx_info8","tor_map_und","tor_radar_und","svr_watchwarn_und","rec_most","rec_sleep","rec_driving","rec_work","rec_store","rec_small_group","rec_large_group","resp_sleep","resp_driving","resp_work","resp_store","resp_small_group","resp_large_group","wthr_info_paper","wthr_info_web","wthr_info_govweb","wthr_info_loctv","wthr_info_cabtv","wthr_info_radio","wthr_info_fam","wthr_info_soc","wthr_info_phone","rec_stream"],["I follow the weather very closely.","I plan my daily routine around the weather.","I don't understand what causes extreme weather events like thunderstorms, tornadoes, and hurricanes.","Extreme high winds","Extreme rain storms","Extreme heat waves","Droughts","Extreme cold temperatures","Extreme snow (or ice) storms","Tornadoes","Floods","Hurricanes","Wildfires","In general, do you understand the difference between watches and warnings?","I receive all tornado warnings that are issued for my area.","I receive tornado warnings as soon as they are issued for my area.","Sometimes I miss tornado warnings that are issued for my area","Sometimes I am not sure if a tornado warning is for my area or a different area.","Sometimes I am not sure what time tornado warnings begin and end for my area.","Sometimes I ignore tornado warnings that are issued for my area.","I always take protective action when tornado warnings are issued for my area.","Sometimes I am too busy to take protective action when tornado warnings are issued for my area.","I am not sure what to do when tornado warnings are issued for my area.","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: The National Weather Service","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: Regional or local TV stations","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: National TV stations (like the Weather Channel)","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: State or local emergency managers","Please indicate your level of trust in information about extreme weather from each of the following organizations and groups: Family, friends, neighbors, employers, co-workers, etc.","How much do you, personally, rely on each of the following sources of information about extreme weather? Broadcast radio","How much do you, personally, rely on each of the following sources of information about extreme weather? Weather radio (National Weather Service radio)","How much do you, personally, rely on each of the following sources of information about extreme weather? Television","How much do you, personally, rely on each of the following sources of information about extreme weather? Internet web pages focused on weather forecasts, such as those provided by the National Weather Service","How much do you, personally, rely on each of the following sources of information about extreme weather? Social media, such as Twitter or Facebook","How much do you, personally, rely on each of the following sources of information about extreme weather? Word-of-mouth (including telephone calls or texts) from family, friends, neighbors, employers, co-workers, etc.","How much do you, personally, rely on each of the following sources of information about extreme weather? Automated text or phone notifications","How much do you, personally, rely on each of the following sources of information about extreme weather? Outdoor warning sirens","Forecasters, websites, and phone applications often use maps to display tornado watches and warnings. How would you rate your understanding of maps?","Forecasters, websites, and phone applications also use radar images to communicate tornado risk. How would you rate your understanding of radar images?","How would you rate your understanding of severe thunderstorm WATCHES and WARNINGS?","I receive most tornado warnings that are issued for my area.","How confident are you that you would receive tornado warnings in the following situations? If you are sleeping?","How confident are you that you would receive tornado warnings in the following situations? If you are in the car?","How confident are you that you would receive tornado warnings in the following situations? If you are at work or school?","How confident are you that you would receive tornado warnings in the following situations? If you are at the store?","How confident are you that you would receive tornado warnings in the following situations? If you are with a small group of friends or family?","How confident are you that you would receive tornado warnings in the following situations? If you are with a large group of friends or family?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are sleeping?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are in a car?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are at work or school?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are at a store?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are with a small group friends or family?","How confident are you that you would take protective action in response to tornado warnings in the following situations? If you are with a large group friends or family?","How frequently do you get information about the weather from each of the following sources: Newspaper","How frequently do you get information about the weather from each of the following sources: Non-government internet websites","How frequently do you get information about the weather from each of the following sources: Government internet websites","How frequently do you get information about the weather from each of the following sources: Local TV (television) news","How frequently do you get information about the weather from each of the following sources: Cable TV (television) news (such as The Weather Channel)","How frequently do you get information about the weather from each of the following sources: Radio","How frequently do you get information about the weather from each of the following sources: Family, friends, or colleagues","How frequently do you get information about the weather from each of the following sources: Social Media, such as Facebook and Twitter","How frequently do you get information about the weather from each of the following sources: Cell phone applications or automated text messages","How confident are you that you would receive tornado warnings in the following situations? If you are watching a show or movie using an online streaming service like Netflix, Amazon Prime, or Hulu?"],["1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = No risk; 2 = Low risk; 3 = Moderate risk; 4 = High risk; 5 = Extreme risk","1 = Definitely no; 2 = Probably no; 3 = Not sure; 4 = Probably yes; 5 = Definitely yes","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = No trust; 2 = Low trust; 3 = Moderate trust; 4 = High trust; 5 = Complete trust","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Not much; 2 = Little; 3 = Somewhat; 4 = Much; 5 = A great deal","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Poor; 2 = Fair; 3 = Good; 4 = Very good; 5 = Excellent","1 = Strongly disagree; 2 = Disagree; 3 = Neither disagree nor agree; 4 = Agree; 5 = Strongly agree","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Never; 2 = Less than once per week; 3 = About once per week; 4 = Several times per week; 5 = About once a day; 6 = Several times a day","1 = Not at all confident; 2 = Not very confident; 3 = Somewhat confident; 4 = Very confident; 5 = Extremely confident"]],"container":"<table class=\"table table-condensed fill-container\">\n  <thead>\n    <tr>\n      <th>Question ID<\/th>\n      <th>Question Text<\/th>\n      <th>Response Options<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"width":"600","targets":2}],"dom":"Blrtip","order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="section-demographics" class="section level1">
<h1>Demographics</h1>
<div id="section-sidebar-5" class="section level2 sidebar" data-width="300">
<h2>Sidebar</h2>
<p><br/> <br/></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="form-group shiny-input-container">
<label class="control-label" for="dem_variable">Select a demographic</label>
<div>
<select id="dem_variable"><option value="EP_POV" selected>Percentage of persons below poverty</option>
<option value="EP_UNEMP">Percentage of civilian (age 16+) unemployed</option>
<option value="EP_PCI">Per capita income</option>
<option value="EP_NOHSDP">Percentage of persons with no high school diploma (age 25+)</option>
<option value="EP_AGE65">Percentage of persons aged 65 and older</option>
<option value="EP_AGE17">Percentage of persons aged 17 and younger</option>
<option value="EP_DISABL">Percentage of civilian noninstitutionalized population with a disability</option>
<option value="EP_SNGPNT">Percentage of single parent households with children under 18</option>
<option value="EP_MINRTY">Percentage minority (all persons except white, non-Hispanic)</option>
<option value="EP_LIMENG">Percentage of persons (age 5+) who speak English less than well</option>
<option value="EP_MUNIT">Percentage of housing in structures with 10 or more units</option>
<option value="MP_MOBILE">Percentage of mobile homes</option>
<option value="EP_CROWD">Percentage of occupied housing units with more people than rooms</option>
<option value="EP_NOVEH">Percentage of households with no vehicle available</option>
<option value="EP_GROUPQ">Percentage of persons in institutionalized group quarters</option></select>
<script type="application/json" data-for="dem_variable" data-nonempty="">{}</script>
</div>
</div>
<p><strong>Notes.</strong> Data from the CDC’s Social Vulnerability Index (SVI), which uses this set of 15 US census variables to help officials identify communities that may need support in preparing for hazards or recovering from disasters. For data and more information about the <a href="https://svi.cdc.gov/index.html">CDC SVI website</a>. See also:</p>
<ul>
<li>Flanagan, B., Hallisey, E., Adams, E., &amp; Lavery, A. (2018). <a href="https://svi.cdc.gov/Documents/Publications/CDC_ATSDR_SVI_Materials/JEH2018.pdf">Measuring Community Vulnerability to Natural and Anthropogenic Hazards: The Centers for Disease Control and Prevention’s Social Vulnerability Index</a>. Journal of Environmental Health, 80(10), 34-36.</li>
</ul>
</div>
<div id="section-row-10" class="section level2">
<h2>Row</h2>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="section-about" class="section level1">
<h1>About</h1>
<p><strong>Motivation.</strong> Members of the weather enterprise, including National Weather Service (NWS) forecasters, emergency managers, broadcast meteorologists, and private partners have many responsibilities, ranging from the issuance of forecasts and warnings during high impact weather events to outreach and public education campaigns during less turbulent periods. Effective education and risk communication across this range of responsibilities requires knowledge of the communities that enterprise members serve. This includes knowledge about atmospheric and climate conditions in communities as well as knowledge about the people in communities. Enterprise members often have access to a wide variety data that facilitate the first type of knowledge, but relatively little data on the populations they serve. As a result, it can be difficult to answer basic questions, such as what risks do the people in my community worry about or neglect? Do they generally receive, understand, and respond to forecasts and warnings? What sources of information do they rely on and trust? Absent reliable answers to these questions, it is challenging to develop public education and risk communication strategies that match the characteristics of the community.</p>
<p><strong>Methodology.</strong> This project works to overcome some these challenges by developing a database of community statistics and this interactive platform that provides some of this information. The approach we use leverages population scale data from the Severe Weather and Society Survey (Wx Survey) and known sub-population characteristics from the US Census to estimate statistics of interest to the weather enterprise. Run by the <a href="http://crcm.ou.edu">University of Oklahoma Center for Risk and Crisis Management (CRCM)</a>, the Wx Survey is a yearly survey of the US public that includes two types of questions: (1) baseline questions that measure core concepts such as risk perceptions, forecast and warning reception, comprehension, and response, hazard comprehension, and trust in information sources; and (2) one-time questions and experiments that address various topics, such as the impact of uncertainty and probabilistic information on risk judgments and protective action decision making. See <a href="http://risk.ou.edu/downloads/news/WX17-Reference-Report.pdf">Silva et al. 2017</a>, <a href="http://risk.ou.edu/downloads/news/WX18-Reference-Report.pdf">Silva et al. 2018</a>, and <a href="http://risk.ou.edu/downloads/news/WX19-Reference-Report.pdf">Silva et al. 2019</a> for information about each survey we conduct, including a complete listing of questions. For more information about the composite measures we produce from these surveys and the steps we take to ensure that the measures are reliable, see:</p>
<ul>
<li><a href="https://doi.org/10.1175/WCAS-D-19-0015.1">Measuring Tornado Warning Reception, Comprehension, and Response in the United States</a></li>
</ul>
<p>Large population surveys such as the Wx Survey provide valuable information about the population as a whole, but <a href="https://www.nap.edu/read/13174/chapter/7">small area estimation (SEA)</a> is necessary to identify differences across geographic sub-populations. This project uses multilevel regression and poststratification <a href="https://journals.sagepub.com/doi/epub/10.1177/1478929919864773">MRP</a> to provide these estimates by NWS County Warning Area (CWA) and county. For more information about this methodology and how we apply it in this context, see:</p>
<ul>
<li><a href="https://doi.org/10.1175/BAMS-D-19-0064.1">Exploring Community Differences in Tornado Warning Reception, Comprehension, and Response Across the United States</a></li>
<li><a href="https://doi.org/10.1111/risa.13569">Geographic Distributions of Extreme Weather Risk Perceptions in the United States</a></li>
</ul>
<p><strong>Support.</strong> Funding for this project comes from multiple sources. The University of Oklahoma provides support for data collection. The US Office of Weather and Air Quality (OWAQ) provides support for data analysis, programming, and maintenance.</p>
<p><strong>Data.</strong> Wx Survey data and metadata are available for download at the <a href="https://dataverse.harvard.edu/dataverse/wxsurvey">Severe Weather and Society Dataverse</a>.</p>
<p><strong>Contact.</strong> Please contact <a href="mailto:jtr@ou.edu">Joe Ripberger</a> or <a href="mailto:clsilva@ou.edu">Carol Silva</a> if you have any questions about the data or project.</p>
<!-- HTML STYLE ----------------- -->
<style>

.section.sidebar {
  background-color: white;
  font-family: "Open-Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
}

.js-irs-0 .irs-bar {
  border-top-color: #443A83;
  border-bottom-color: #443A83;
}

.js-irs-0 .irs-bar-edge {
  border-color: #443A83;
}

.js-irs-0 .irs-single, .js-irs-0 .irs-bar-edge, .js-irs-0 .irs-bar {
  background: #443A83;
}

.navbar-inverse {
  background-color: #443A83;
  border-color: #440154;
  font-size: 15px;
}

.navbar-inverse .navbar-brand {
  color: #a3a9ac;
  font-size: 15px;
}

a:hover, a:focus {
color: #440154;
text-decoration: underline;
}

a {
color: #443A83;
text-decoration: none;
}

.navbar-inverse .navbar-nav>li>a {
  color: #a3a9ac;
  font-size: 15px;
}

</style>

<script type="application/shiny-prerendered" data-context="server">
variable_map_cols <- viridis(100)
variable_map_pal <- colorNumeric(palette = variable_map_cols, domain = c(30, 70))

output$map <- renderLeaflet({
  map$variableplot <- map@data[, input$variable]
  p_popup <- with(map@data, paste0("NWS ", City, ", ", ST, " (", CWA,")", "<br>", 
                                   "Percentile rank of the average person in the CWA: ", round(variableplot, 2), "<br>",
                                   "Percentile rank of the CWA: ", round(pnorm(scale(variableplot)) * 100, 2)))
  l <- leaflet(map) %>%
    setView(lng = -97, lat = 40, zoom = 4) %>% 
    addFullscreenControl() %>% 
    addTiles(options = providerTileOptions(minZoom = 4, maxZoom = 10)) %>%
    clearShapes() %>%
    addPolygons(
      fillColor = ~variable_map_pal(variableplot),
      highlight = highlightOptions(weight = 5, color = "grey", fillOpacity = 0.9, bringToFront = TRUE),
      color = "white",
      fillOpacity = 0.9,
      stroke = TRUE,
      smoothFactor = 0.8,
      weight = 2,
      popup = p_popup,
      layerId = ~CWA) %>%
    addLegend(position = 'bottomright', pal = variable_map_pal, values = ~variableplot, opacity = 0.7, title = "Mean<br>Percentile<br>Rank")
  })

leafletOutput(outputId = "map")

click_tract <- eventReactive(input$map_shape_click, {
    x <- input$map_shape_click
    y <- x$id
    return(y)
  })

tract_data <- reactive({
    # Fetch data for the clicked tract
    return(map@data[map@data$CWA == click_tract(), ])
  })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
# variable_map_cols <- viridis(100, option = "plasma")
variable_map_cols <- viridis(100)
variable_map_pal <- colorNumeric(palette = variable_map_cols, domain = c(30, 70))

output$fips_map <- renderLeaflet({
  map <- fips_map[fips_map$CWA == tract_data()[, 1], ]
  map$variableplot <- map@data[, input$variable]
  # variable_map_pal <- colorNumeric(palette = variable_map_cols, domain = c(min(map$variableplot), max(map$variableplot))) # MAKE COLORS RELATIVE WITHIN CWA
  p_popup <- with(map@data, paste0(COUNTYNAME, ", County ", "(", CWA, ")", "<br>",
                                   "Percentile rank of the average person in the County: ", round(variableplot, 2), "<br>",
                                   "Percentile rank of the County: ", round(pnorm(scale(variableplot)) * 100, 2)))
  l <- leaflet(map) %>%
    addFullscreenControl() %>%
    addTiles(options = providerTileOptions(minZoom = 4, maxZoom = 10)) %>%
    clearShapes() %>%
    addPolygons(
      fillColor = ~variable_map_pal(variableplot),
      highlight = highlightOptions(weight = 5, color = "grey", fillOpacity = 0.9, bringToFront = TRUE),
      color = "white",
      fillOpacity = 0.9,
      stroke = TRUE,
      smoothFactor = 0.8,
      weight = 2,
      popup = p_popup,
      layerId = ~FIPS) %>%
    addLegend(position = 'bottomright', pal = variable_map_pal, values = ~variableplot, opacity = 0.7, title = "Mean<br>Percentile<br>Rank")
  })

leafletOutput(outputId = "fips_map")
</script>
 
<script type="application/shiny-prerendered" data-context="server">
R1 <- data.frame(
  question = c("[Please tell us how strongly you agree with the following statements about tornado WARNINGS:] I receive all tornado warnings that are issued for my area.",
               "[Please tell us how strongly you agree with the following statements about tornado WARNINGS:] I receive most tornado warnings that are issued for my area.",
               "[Please tell us how strongly you agree with the following statements about tornado WARNINGS:] I receive tornado warnings as soon as they are issued for my area.",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are sleeping?",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are in a car?",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are at work or school?",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are at a store?",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are with a small group of friends or family?",
               "[How confident are you that you would receive tornado warnings in the following situations:] If you are with a large group of friends or family?",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would receive the warning:] 1:00 AM – 9:00 AM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would receive the warning:] 10:00 AM – 5:00 PM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would receive the warning:] 6:00 PM – 12:00 AM"))

R2 <- data.frame(
  question = c("In general, do you understand the difference between watches and warnings?",
               "How would you rate your understanding of tornado watches and warnings?",
               "How would you rate your understanding of severe thunderstorm watches and warnings?",
               "Forecasters, websites, and phone applications often use maps to display tornado watches and warnings. How would you rate your understanding of maps?",
               "Forecasters, websites, and phone applications also use radar images to communicate tornado risk. How would you rate your understanding of radar images?",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would understand the warning:] 1:00 AM – 9:00 AM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would understand the warning:] 10:00 AM – 5:00 PM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would understand the warning:] 6:00 PM – 12:00 AM"))

R3 <- data.frame(
  question = c("This alert is issued when severe thunderstorms and tornadoes are possible in and near the area. It does not mean that they will occur. It only means they are possible. [Tornado Watch*, Tornado Warning, Don't Know]",
               "This alert is used when a tornado is imminent. When this alert is issued, seek safe shelter immediately. [Tornado Watch, Tornado Warning*, Don't]",
               "If the National Weather Service issues a tornado warning for your area, how much time do you have before the tornado arrives? [Less than 1 hour*, 1 to 24 hours, 1 to 3 days, More than 3 days]",
               "If the National Weather Service issues a tornado watch for your area, how much time do you have before the tornado arrives? [Less than 1 hour, 1 to 24 hours*, 1 to 3 days, More than 3 days]",
               "Approximately how large is the area included in an average tornado watch? [Around the size of a city, Around the size of a county, Around the size of multiple counties*, Around the size of a state*, Around the size of multiple states*]"))

R4 <- data.frame(
  question = c("[Please tell us how strongly you agree with the following statements about tornado WARNINGS:] If you have never received a tornado WARNING, please tell us how you think you will respond if you receive a WARNING in the future.", 
               "[Please tell us how strongly you agree with the following statements about tornado WARNINGS:] I always take protective action when tornado warnings are issued for my area.",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are sleeping?",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are in a car?",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are at work or school?",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are at a store?",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are with a small group of friends or family?",
               "[How confident are you that you would take protective action in response to tornado warnings in the following situations:] If you are with a large group of friends or family?",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would take protective action in response to the warning:] 1:00 AM – 9:00 AM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would take protective action in response to the warning:] 10:00 AM – 5:00 PM",
               "[If a tornado WARNING were issued for your area tomorrow at [RANDOM TIME], how confident are you that you would take protective action in response to the warning:] 6:00 PM – 12:00 AM"))


R5 <- data.frame(
  question = c("[Please tell us how strongly you agree with the following statements:] It is possible for most people in my area to prepare and to secure their property ahead of time for a tornado.",
               "[Please tell us how strongly you agree with the following statements:] It is possible for most people in my area to develop a safety plan for how to deal with a tornado.",
               "[Please tell us how strongly you agree with the following statements:] It is possible for most people in my area to protect themselves against a tornado.",
               "[Please tell us how strongly you agree with the following statements:] It is possible for most people in my area to evacuate when necessary ahead of a tornado.",
               "[Please tell us how strongly you agree with the following statements:] I feel that I can prepare and secure my property ahead of time for a tornado.",
               "[Please tell us how strongly you agree with the following statements:] I have a safety plan for how to deal with a tornado.",
               "[Please tell us how strongly you agree with the following statements:] I can protect myself against a tornado.",
               "[Please tell us how strongly you agree with the following statements:] I can evacuate when necessary ahead of a tornado."))

R6 <- data.frame(
  question = c("[To the best of your knowledge, are the following statements about tornadoes true or false:] Tall buildings protect large cities from tornadoes.",
               "[To the best of your knowledge, are the following statements about tornadoes true or false:] Mountains, rivers, and lakes do not protect nearby areas from tornadoes.",
               "[To the best of your knowledge, are the following statements about tornadoes true or false:] When driving, you should not take shelter from tornadoes under a bridge or overpass.",
               "[To the best of your knowledge, are the following statements about tornadoes true or false:] When sheltering in a house from a tornado, you should open all the windows to equalize the pressure inside and outside to prevent the house from exploding."))

composite_questions <- bind_rows(R1 %>% mutate(measure = "RECEP"), 
                                 R2 %>% mutate(measure = "SUB_COM"),
                                 R3 %>% mutate(measure = "OBJ_COM"),
                                 R4 %>% mutate(measure = "RESP"),
                                 R5 %>% mutate(measure = "EFFICAC"),
                                 R6 %>% mutate(measure = "MYTH"))

DT::renderDataTable({
  data <- composite_questions %>% 
    filter(measure == input$variable) %>% 
    select(question)
  DT::datatable(data,
                filter = "top",
                selection = "single",
                rownames = FALSE,
                style = "bootstrap",
                class = "compact",
                options = list(dom = "Blrtip", pageLength = 25), 
                colnames = c("Question Text" = "question"))
})

</script>
 
<script type="application/shiny-prerendered" data-context="server">
perception_map_cols <- viridis(100)
perception_map_pal <- colorNumeric(palette = perception_map_cols, domain = c(0, 100))

output$perception_map <- renderLeaflet({
  map$eventplot <- map@data[, input$event]
  p_popup <- with(map@data, paste0("NWS ", City, ", ", ST, " (", CWA,")", "<br>",
                                   "Percentile rank of the average person in the CWA: ", round(eventplot, 2), "<br>",
                                   "Percentile rank of the CWA: ", round(pnorm(scale(eventplot)) * 100, 2)))
  l <- leaflet(map) %>%
    setView(lng = -97, lat = 40, zoom = 3) %>% 
    addTiles(options = providerTileOptions(minZoom = 3, maxZoom = 10)) %>%
    addFullscreenControl() %>% 
    clearShapes() %>%
    addPolygons(
      fillColor = ~perception_map_pal(eventplot),
      color = "white",
      fillOpacity = 0.9,
      stroke = TRUE,
      smoothFactor = 0.8,
      weight = 0.5,
      popup = p_popup,
      layerId = ~CWA,
      highlight = highlightOptions(weight = 5, color = "grey", fillOpacity = 0.9, bringToFront = TRUE)) %>%
    addLegend(position = 'bottomright', pal = perception_map_pal, values = ~eventplot, opacity = 0.7, title = "Mean<br>Percentile<br>Rank")
  })
leafletOutput(outputId = "perception_map")
</script>
 
<script type="application/shiny-prerendered" data-context="server">
frequency_map_cols <- viridis(100)
frequency_map_pal <- colorNumeric(palette = frequency_map_cols, domain = c(0, 100))

output$frequency_map <- renderLeaflet({
  col_num <- NA
  col_num <- ifelse(input$event == "PER_HEA", 29, col_num)
  col_num <- ifelse(input$event == "PER_DRO", 33, col_num)
  col_num <- ifelse(input$event == "PER_COL", 26, col_num)
  col_num <- ifelse(input$event == "PER_SNO", 31, col_num)
  col_num <- ifelse(input$event == "PER_TOR", 32, col_num)
  col_num <- ifelse(input$event == "PER_FLO", 28, col_num)
  col_num <- ifelse(input$event == "PER_HUR", 30, col_num)
  col_num <- ifelse(input$event == "PER_FIR", 27, col_num)
  map$freqplot <- map@data[, col_num]
  p_popup <- with(map@data, paste0("NWS ", City, ", ", ST, " (", CWA,")", "<br>",
                                   "Percentile rank of the CWA: ", round(freqplot, 2)))
  l <- leaflet(map) %>%
    setView(lng = -97, lat = 40, zoom = 3) %>% 
    addTiles(options = providerTileOptions(minZoom = 3, maxZoom = 10)) %>%
    addFullscreenControl() %>% 
    clearShapes() %>%
    addPolygons(
      fillColor = ~frequency_map_pal(freqplot),
      color = "white",
      fillOpacity = 0.9,
      stroke = TRUE,
      smoothFactor = 0.8,
      weight = 0.5,
      popup = p_popup,
      layerId = ~CWA,
      highlight = highlightOptions(weight = 5, color = "grey", fillOpacity = 0.9, bringToFront = TRUE)) %>%
    addLegend(position = 'bottomright', pal = frequency_map_pal, values = ~freqplot, opacity = 0.7, title = "CWA<br>Percentile<br>Rank")
  })
leafletOutput(outputId = "frequency_map")
</script>
 
<script type="application/shiny-prerendered" data-context="server">
renderPlot({
  col_num <- NA
  col_num <- ifelse(input$event == "PER_HEA", "HEAT", col_num)
  col_num <- ifelse(input$event == "PER_DRO", "DROUGHT", col_num)
  col_num <- ifelse(input$event == "PER_COL", "COLD", col_num)
  col_num <- ifelse(input$event == "PER_SNO", "SNOW", col_num)
  col_num <- ifelse(input$event == "PER_TOR", "TORN", col_num)
  col_num <- ifelse(input$event == "PER_FLO", "FLOOD", col_num)
  col_num <- ifelse(input$event == "PER_HUR", "HURR", col_num)
  col_num <- ifelse(input$event == "PER_FIR", "FIRE", col_num)
  p <- ggplot(map@data, aes_string(x = col_num, y = input$event)) +
    geom_smooth(color = "red", fill = "red", alpha = 0.5, se = FALSE, size = 3) +
    geom_point(fill = "grey40", color = "grey40", alpha = 0.3, size = 8) +
    geom_point(data = map@data[map@data$CWA == input$cwa, ], 
               mapping = aes_string(x = col_num, y = input$event), 
               color = "blue", fill = "blue", alpha = 0.3, size = 20) +
    geom_text(aes(label = CWA)) +
    labs(x = "Objective Event Frequency", y = "Subjective Risk Perceptions", title = input$cwa) +
    theme_minimal() +
    theme(text = element_text(size = 20))
  print(p)
  })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
x <- reactive({
  survey_data %>%
    drop_na(!!as.name(input$att)) %>%
    group_by(!!as.name(input$att)) %>%
    select(warn_how_br_rad:warn_how_phone) %>%
    summarise_all(mean, na.rm = TRUE) %>%
    gather(variable, value, -!!as.name(input$att)) %>%
    mutate(value = value * 100) %>%
    mutate(Source = recode(variable,
                           "warn_how_br_rad" = "Broadcast\nRadio",
                           "warn_how_wx_rad" = "Weather\nRadio",
                           "warn_how_tv" = "Television",
                           "warn_how_siren" = "Siren",
                           "warn_how_int" = "Internet",
                           "warn_how_soc" = "Social\nMedia",
                           "warn_how_word" = "Word\nof Mouth",
                           "warn_how_phone" = "Phone\nNotification")) %>%
    mutate(Source = factor(Source,
                        levels = c("Television", "Phone\nNotification", "Internet", "Siren", "Weather\nRadio",
                                   "Broadcast\nRadio", "Word\nof Mouth", "Social\nMedia"))) %>%
    mutate(l = round(value, 0))
  })

y <- reactive({
  survey_data %>%
    drop_na(!!as.name(input$att)) %>%
    group_by(!!as.name(input$att)) %>%
    select(wx_info1:wx_info8) %>%
    summarise_all(mean, na.rm = TRUE) %>%
    gather(variable, value, -!!as.name(input$att)) %>%
    mutate(Source = recode(variable,
                           "wx_info1" = "Broadcast\nRadio",
                           "wx_info2" = "Weather\nRadio",
                           "wx_info3" = "Television",
                           "wx_info8" = "Siren",
                           "wx_info4" = "Internet",
                           "wx_info5" = "Social\nMedia",
                           "wx_info6" = "Word\nof Mouth",
                           "wx_info7" = "Phone\nNotification")) %>%
    mutate(Source = factor(Source,
                        levels = c("Television", "Phone\nNotification", "Internet", "Siren", "Weather\nRadio",
                                   "Broadcast\nRadio", "Word\nof Mouth", "Social\nMedia"))) %>%
    mutate(l = round(value, 1))
  })

renderPlot({
  p1 <- ggplot(x(), aes_string(x = "Source", y = "value", color = input$att, group = input$att, label = "l")) +
    geom_point(size = 9, position = position_dodge(width = 0.7)) +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 18)) +
    labs(x = "Source", y = "Respondents (%)") +
    ggtitle("How did you learn about the [most recent] tornado warning?\n") +
    theme(plot.title = element_text(color = "grey30")) +
    scale_color_viridis(discrete = TRUE)
  p2 <- ggplot(y(), aes_string(x = "Source", y = "value", color = input$att, group = input$att, label = "l")) +
    geom_point(size = 9, position = position_dodge(width = 0.7)) +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 18)) +
    labs(x = "", y = "Mean Response") +
    scale_y_continuous(breaks = 1:5, labels = c("Not\nmuch (1)", "Little (2)", "Somewhat (3)", "Much (4)", "A great\ndeal (5)"), limits = c(1, 5)) +
    ggtitle("How much do you rely on each of the following sources of information about extreme weather?\n") +
    theme(plot.title = element_text(color = "grey30")) +
    scale_color_viridis(discrete = TRUE)
  p <- cowplot::plot_grid(p1, p2, align = "v", ncol = 1)
  print(p)

  p1t <- p1 + geom_text(position = position_dodge(width = 0.7), size = 4, color = "white", fontface = "bold")
  p2t <- p2 + geom_text(position = position_dodge(width = 0.7), size = 4, color = "white", fontface = "bold")
  pt <- cowplot::plot_grid(p1t, p2t, align = "v", ncol = 1)
  print(pt)

  if (input$check == FALSE) {print(p)}
  if (input$check == TRUE) {print(pt)}
 
  }, height = 900)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
svs_data1 <- survey_data %>%
  filter(prob_event == "severe thunderstorms") %>%
  select(risk_chan, risk_poss, risk_may, risk_exp) %>%
  gather() %>%
  na.omit %>%
  mutate(prob_event = "Severe Thunderstorms", value = as.numeric(value))
svs_data1 <- transform(svs_data1, key = reorder(key, value))

tor_data1 <- survey_data %>%
  filter(prob_event == "tornadoes") %>%
  select(risk_chan, risk_poss, risk_may, risk_exp) %>%
  gather() %>%
  na.omit %>%
  mutate(prob_event = "Tornadoes", value = as.numeric(value))
tor_data1 <- transform(tor_data1, key = reorder(key, value))

words_data1 <- bind_rows(svs_data1, tor_data1)

svs_data2 <- survey_data %>%
  filter(prob_event == "severe thunderstorm") %>%
  select(ext_low, vry_low, vry_small, prty_low, small, low, slight, remote, medium, moderate,
         good, high, large, prty_high, vry_high, sig, ext_high) %>%
  gather() %>%
  na.omit %>%
  mutate(prob_event = "Severe Thunderstorms")
svs_data2 <- transform(svs_data2, key = reorder(key, value))

tor_data2 <- survey_data %>%
  filter(prob_event == "tornado") %>%
  select(ext_low, vry_low, vry_small, prty_low, small, low, slight, remote, medium, moderate,
         good, high, large, prty_high, vry_high, sig, ext_high) %>%
  gather() %>%
  na.omit %>%
  mutate(prob_event = "Tornadoes")
tor_data2 <- transform(tor_data2, key = reorder(key, value))

words_data2 <- bind_rows(svs_data2, tor_data2)

renderPlot({
    d1 <- words_data1[words_data1$prob_event == input$prob_event, ]
    p1 <- ggplot(d1, aes(x = key, y = value)) +
      geom_boxplot(aes(fill = key), alpha = 0.8, size = 0.3, outlier.size = -1) +
      guides(fill = FALSE, color = FALSE) +
      coord_flip() +
      labs(x = "", y = "Response (Percent)", title = "No Qualifying Expressions [WX18]") +
      theme_minimal() +
      theme(text = element_text(size = 16),
            plot.title = element_text(size = 14)) +
      scale_fill_viridis(discrete = TRUE) +
      scale_y_continuous(breaks = seq(0, 100, 10), labels = paste0(seq(0, 100, 10), "%")) +
      scale_x_discrete(labels = c("risk_chan" = "There is a chance of [...]",
                                  "risk_poss" = "[...] are possible",
                                  "risk_may" = "[...] may occur",
                                  "risk_exp" = "[...] are expected"))
    d2 <- words_data2[words_data2$prob_event == input$prob_event, ]
    p2 <- ggplot(d2, aes(x = key, y = value)) +
      geom_boxplot(aes(fill = key), alpha = 0.8, size = 0.3, outlier.size = -1) +
      guides(fill = FALSE, color = FALSE) +
      coord_flip() +
      labs(x = "", y = "Response (Percent)", title = "Qualifying Expressions [WX19]") +
      theme_minimal() +
      theme(text = element_text(size = 16),
            plot.title = element_text(size = 14)) +
      scale_fill_viridis(discrete = TRUE) +
      scale_y_continuous(breaks = seq(0, 100, 10), labels = paste0(seq(0, 100, 10), "%")) +
      scale_x_discrete(labels = c("ext_low" = "Extremely low chance of [...]",
                                  "vry_low" = "Very low chance of [...]",
                                  "vry_small" = "Extremely small chance of [...]",
                                  "prty_low" = "Pretty low chance of [...]",
                                  "small" = "Small chance of [...]",
                                  "remote" = "Remote chance of [...]",
                                  "low" = "Low chance of [...]",
                                  "slight" = "Slight chance of [...]",
                                  "medium" = "Medium chance of [...]",
                                  "moderate" = "Moderate chance of [...]",
                                  "good" = "Good chance of [...]",
                                  "large" = "Large chance of [...]",
                                  "high" = "High chance of [...]",
                                  "prty_high" = "Pretty high chance of [...]",
                                  "vry_high" = "Very high chance of [...]",
                                  "sig" = "Significant chance of [...]",
                                  "ext_high" = "Extremely high chance of [...]"))
    p <- cowplot::plot_grid(p1, p2, align = "v", ncol = 1, rel_heights = c(0.4, 1))
    print(p)
    }, height = 720)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
exp_data <- survey_data %>% drop_na(extprob_a_prob)
prop_data_long <- select(exp_data, p_id, extprob_a_prob, extprob_b_prob, extprob_c_prob) %>% pivot_longer(extprob_a_prob:extprob_c_prob, names_to = "Prob_Time", values_to = "Prob")
int_data_long <- select(exp_data, extprob_a_int, extprob_b_int, extprob_c_int) %>% pivot_longer(extprob_a_int:extprob_c_int, names_to = "Int_Time", values_to = "Int")
perc_data_long <- select(exp_data, extprob_a, extprob_b, extprob_c) %>% pivot_longer(extprob_a:extprob_c, names_to = "Perc_Time", values_to = "Perc")
long_data <- bind_cols(prop_data_long, int_data_long, perc_data_long)
long_data <- left_join(long_data, exp_data %>% select(p_id, data.frame(groups)$groups), by = "p_id")
long_data$Int <- factor(long_data$Int, levels = c("a Light (EF-0)",
                                                "a Moderate (EF-1)",
                                                "a Significant (EF-2)",
                                                "a Severe (EF-3)",
                                                "a Devastating (EF-4)",
                                                "an Incredible (EF-5)"),
                        labels = 0:5)

long_data$Int <- as.numeric(as.character(long_data$Int))

renderPlot({
  p1 <- ggplot(long_data %>% drop_na(input$neg_group), aes_string(y = "Perc", x = "Int", color = input$neg_group)) +
    geom_smooth(method = "lm") +
    labs(x = "Forecast Intensity (EF-Scale)", y = "Mean Response (Risk Rating)") +
    theme_minimal() +
    theme(text = element_text(size = 18)) +
    coord_cartesian(ylim = c(2.25, 4)) +
    scale_color_viridis(discrete = TRUE)
  p2 <- ggplot(long_data %>% drop_na(input$neg_group), aes_string(y = "Perc", x = "Prob", color = input$neg_group)) +
    geom_smooth(method = "lm") +
    labs(x = "Forecast Probability (Percent Chance)", y = "Mean Response (Risk Rating)") +
    theme_minimal() +
    theme(text = element_text(size = 18)) +
    coord_cartesian(ylim = c(2.25, 4)) +
    scale_color_viridis(discrete = TRUE)
  p <- cowplot::plot_grid(p1, p2, align = "v", nrow = 1)
  print(p)
  }, height=700)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
s <- reactive({
  survey_data %>%
  select(!!as.name(input$spc_group), risk_word, risk_perc) %>%
  drop_na(!!as.name(input$spc_group), risk_word, risk_perc) %>%
  gather(variable, value, -c(!!as.name(input$spc_group), risk_word)) %>%
  mutate(cat = factor(risk_word,
                      levels = c("SLIGHT RISK", "MODERATE RISK", "HIGH RISK"),
                      labels = c("Slight", "Moderate", "High")))
  })

z <- reactive({
  survey_data %>%
    select(!!as.name(input$spc_group), spc_mar:spc_hig) %>%
    gather(variable, value, -!!as.name(input$spc_group)) %>%
    group_by(!!as.name(input$spc_group), variable, value) %>%
    drop_na(!!as.name(input$spc_group), variable, value) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
    mutate(rank = factor(value)) %>%
    mutate(cat = factor(variable,
                        levels = c("spc_mar", "spc_sli", "spc_enh", "spc_mod", "spc_hig"),
                        labels = c("Marginal", "Slight", "Enhanced", "Moderate", "High")))
  })

renderPlot({
  p1 <- ggplot(s(), aes_string(x = "cat", y = "value", color = input$spc_group)) +
    stat_summary(size = 1.5, position = position_dodge(width = 0.5)) +
    labs(y = "Mean Response", x = "SPC Risk Category") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 16)) +
    scale_color_viridis(discrete = TRUE) +
    coord_cartesian(ylim = c(0, 60)) +
    coord_flip() +
    ggtitle("If there is a [SLIGHT|MODERATE|HIGH] risk of tornadoes in your area tomorrow evening, how likely is it that a tornado will hit within 25 miles of your residence?\n") +
    theme(plot.title = element_text(color = "grey30"))
    p2 <- ggplot(z(), aes(x = cat, y = p, fill = rank)) +
    geom_bar(stat = "identity", position = position_dodge()) +
    labs(y = "Respondents (%)", x = "SPC Risk Category", fill = "Ranking") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 16 )) +
    scale_fill_viridis(discrete = TRUE) +
    facet_wrap(as.formula(paste("~", input$spc_group))) +
    ggtitle("Can you rank these phrases from one (lowest risk) to five (highest risk)?\n") +
    theme(plot.title = element_text(color = "grey30"))
  p <- cowplot::plot_grid(p1, p2, align = "v", ncol = 1)
  print(p)
  }, height=750)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
a <- reactive({
  survey_data %>%
    select(!!as.name(input$trade_group), mi_fa_should:mi_fa_do) %>%
    gather(variable, value, -!!as.name(input$trade_group)) %>%
    group_by(!!as.name(input$trade_group), variable, value) %>%
    drop_na(!!as.name(input$trade_group), variable, value) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
    ungroup() %>%
    mutate(ques = factor(variable, labels = c("What DO forecasters do?", "What SHOULD forecasters do?"))) %>%
    mutate(resp = factor(value, labels = c("Minimize the possibility that a tornado\nwill occur without a warning",
                                         "Lean towards limiting the possibility that\na tornado will occur without a warning",
                                         "Lean towards limiting the possibility of false alarms",
                                         "Minimize the possibility of false alarms")))
  })

b <- reactive({
  survey_data %>%
    select(!!as.name(input$trade_group), leadtime_do:leadtime_should) %>%
    gather(variable, value, -!!as.name(input$trade_group)) %>%
    group_by(!!as.name(input$trade_group), variable, value) %>%
    drop_na(!!as.name(input$trade_group), variable, value) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
    ungroup() %>%
    mutate(ques = factor(variable, labels = c("What DO forecasters do?", "What SHOULD forecasters do?"))) %>%
    mutate(resp = factor(value, labels = c("Maximize lead time",
                                         "Lean towards more lead time",
                                         "Lean towards more precision/accuracy",
                                         "Maximize precision/accuracy")))
  })

e <- reactive({
  survey_data %>%
    select(!!as.name(input$trade_group), uncert_do:uncert_should) %>%
    gather(variable, value, -!!as.name(input$trade_group)) %>%
    group_by(!!as.name(input$trade_group), variable, value) %>%
    drop_na(!!as.name(input$trade_group), variable, value) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
    ungroup() %>%
    mutate(ques = factor(variable, labels = c("What DO forecasters do?", "What SHOULD forecasters do?"))) %>%
    mutate(resp = factor(value, labels = c("Maximize simplicity",
                                         "Lean towards simplicity",
                                         "Lean towards more information",
                                         "Maximize information")))
  })

renderPlot({
  p1 <- ggplot(a(), aes_string(x = "p", y = "resp", color = input$trade_group)) +
    geom_point(size = 8) +
    labs(x = "Respondents (%)", y = "") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 14)) +
    scale_color_viridis(discrete = TRUE) +
    facet_wrap(~ques) +
    xlim(0, 50) +
    ggtitle("How [DO|SHOULD] forecasters in your area balance the possibility of false alarms vs.the possibility that a tornado will occur without a warning?\n") +
    theme(plot.title = element_text(color = "grey30"))
  p2 <- ggplot(b(), aes_string(x = "p", y = "resp", color = input$trade_group)) +
    geom_point(size = 8) +
    labs(x = "Respondents (%)", y = "") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 14)) +
    scale_color_viridis(discrete = TRUE) +
    facet_wrap(~ques) +
    xlim(0, 50) +
    ggtitle("How [DO|SHOULD] forecasters in your area balance considerations of lead time vs. accuracy?\n") +
    theme(plot.title = element_text(color = "grey30"))
  p3 <- ggplot(e(), aes_string(x = "p", y = "resp", color = input$trade_group)) +
    geom_point(size = 8) +
    labs(x = "Respondents (%)", y = "") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 14)) +
    scale_color_viridis(discrete = TRUE) +
    facet_wrap(~ques) +
    xlim(0, 50) +
    ggtitle("How [DO|SHOULD] forecasters in your area balance considerations of simplicity vs. more information?\n") +
    theme(plot.title = element_text(color = "grey30"))
  p <- cowplot::plot_grid(p1, p2, p3, align = "v", ncol = 1)
  print(p)
  }, height=750)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
time_data_group_rec <- time_data %>%
  group_by(time_fac, reception) %>%
  drop_na(time_fac, reception) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
  ungroup() %>%
  mutate(time_num = rep(0:23, each = 5)) %>%
  mutate(l = paste0(round(p, 1), "%")) %>%
  mutate(variable = "Receive") %>%
  mutate(value = reception)

time_data_group_comp <- time_data %>%
  group_by(time_fac, comprehension) %>%
  drop_na(time_fac, comprehension) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
  ungroup() %>%
  mutate(time_num = rep(0:23, each = 5)) %>%
  mutate(l = paste0(round(p, 1), "%")) %>%
  mutate(variable = "Understand") %>%
  mutate(value = comprehension)

time_data_group_resp <- time_data %>%
  group_by(time_fac, response) %>%
  drop_na(time_fac, response) %>%
    summarise(n = n()) %>%
    mutate(p = n/sum(n) * 100) %>%
  ungroup() %>%
  mutate(time_num = rep(0:23, each = 5)) %>%
  mutate(l = paste0(round(p, 1), "%")) %>%
  mutate(variable = "Take Protective Action") %>%
  mutate(value = response)

time_data_group <- bind_rows(time_data_group_rec, time_data_group_comp, time_data_group_resp)
time_data_group$variable <- factor(time_data_group$variable, levels = c("Receive", "Understand", "Take Protective Action"))

q <- reactive({
  time_data_group %>%
    filter(time_num == input$time_group)
    })

renderPlot({
  p <- ggplot(q(), aes_string(x = "value", y = "p", label = "l", fill = "variable")) +
    geom_bar(stat = "identity") +
    geom_text(size = 6, vjust = -0.2, color = "black") +
    labs(y = "Respondents (%)", x = "") +
    theme_minimal() +
    theme(text = element_text(size = 18),
          plot.title = element_text(size = 14),
          axis.text.x = element_text(size = 12)) +
    ggtitle(q()$time_fac) +
    ylim(0, 45) +
    theme(plot.title = element_text(color = "grey30")) +
    scale_fill_viridis(discrete = TRUE) +
    facet_wrap(~variable) +
    guides(fill = FALSE) +
    scale_x_continuous(breaks = 1:5, labels = c("Not at all\nconfident", "Not very\nconfident", "Somewhat\nconfident", "Very\nconfident", "Extremely\nconfident"))
  print(p)
  }, height=700)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
d <- reactive({
  survey_data %>%
    group_by(!!as.name(input$exp_group), !!as.name(input$exp_variable)) %>%
    drop_na(input$exp_group, input$exp_variable) %>%
    summarize(n = n()) %>%
    mutate(p = round(n/sum(n) * 100)) %>%
    mutate(l = paste0(p, "%")) %>%
    mutate(resp = factor(!!as.name(input$exp_variable)))
})

renderPlot({
  p1 <- ggplot(d() %>% drop_na(input$exp_group), aes_string(x = "resp", y = "p", fill = input$exp_group, label = "l")) +
    geom_bar(stat = "identity", position = "dodge") +
    geom_text(position = position_dodge(width = .9), size = 6, vjust = -0.2, color = "black") +
    labs(x = "Response", y = "Respondents (%)", fill = "Group") +
    theme_minimal() +
    scale_fill_viridis(discrete = TRUE) +
    theme(text = element_text(size = 18))
  p2 <- ggplot(survey_data %>% drop_na(input$exp_group), aes_string(y = input$exp_variable, x = input$exp_group, fill = input$exp_group)) +
    geom_boxplot() +
    labs(x = "Group", y = "Response", fill = "Group") +
    theme_minimal() +
    scale_fill_viridis(discrete = TRUE) +
    theme(text = element_text(size = 18))
  if (input$exp_variable %in% names(cat)) {print(p1)}
  if (input$exp_variable %in% names(num)) {print(p2)}
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
renderPlot({
  p <- ggplot(ts_data %>% drop_na(input$ts_group, input$ts_meas), aes_string(x = "Year", y = input$ts_meas, color = input$ts_group, group = input$ts_group)) +
    stat_summary(size = 1.5, geom = "pointrange", position = position_dodge(width = 0.5)) +
    stat_summary(size = 1.5, geom = "line", position = position_dodge(width = 0.5)) +
    labs(x = "Week", y = "Mean", fill = "Group", 
         title = variable_data[variable_data$id == input$ts_meas, ]$question) + 
    theme_minimal(base_size = 20) +
    theme(title = element_text(size = 14)) +
    scale_color_viridis(discrete = TRUE)
  ps <- p + lims(y = c(min(ts_data[, input$ts_meas], na.rm = TRUE), max(ts_data[, input$ts_meas], na.rm = TRUE)))
  if (input$scale == FALSE) {print(p)}
  if (input$scale == TRUE) {print(ps)}
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
dem_map_cols <- viridis(100)
# dem_map_pal <- colorNumeric(palette = dem_map_cols, domain = c(0, 100))

output$demo_map <- renderLeaflet({
  fips_map$demplot <- fips_map@data[, input$dem_variable]
  dem_map_pal <- colorNumeric(palette = dem_map_cols, domain = c(min(fips_map$demplot, na.rm = TRUE), max(fips_map$demplot, na.rm = TRUE)), na.color = NA)
  p_popup <- with(fips_map@data, paste0(COUNTYNAME, ", County ", "(", CWA, ")", "<br>",
                                   "Estimate: ", round(demplot, 2)))
  l <- leaflet(fips_map) %>%
    setView(lng = -97, lat = 40, zoom = 4) %>%
    addTiles(options = providerTileOptions(minZoom = 3, maxZoom = 10)) %>%
    addFullscreenControl() %>%
    clearShapes() %>%
    addPolygons(
      fillColor = ~dem_map_pal(demplot),
      color = "white",
      fillOpacity = 0.9,
      stroke = TRUE,
      smoothFactor = 0.8,
      weight = 0.5,
      popup = p_popup,
      layerId = ~FIPS,
      highlight = highlightOptions(weight = 5, color = "grey", fillOpacity = 0.9, bringToFront = TRUE)) %>%
    addLegend(position = 'bottomright', pal = dem_map_pal, values = ~demplot, opacity = 0.7, title = "ACS<br>Estimate") %>%
    addPolygons(data = map, fill = FALSE, weight = 2, color = "white", group = "CWA") %>%
    addLayersControl(overlayGroups = "CWA", options = layersControlOptions(collapsed = FALSE))
  })
leafletOutput(outputId = "demo_map", height = 700)
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/simplex.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["stickytableheaders"]},{"type":"character","attributes":{},"value":["0.1.19"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/stickytableheaders"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.stickytableheaders.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["flexdashboard"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider"]},{"type":"character","attributes":{},"value":["2.1.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/ion.rangeSlider.min.js"]},{"type":"character","attributes":{},"value":["css/ion.rangeSlider.css","css/ion.rangeSlider.skinShiny.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["strftime"]},{"type":"character","attributes":{},"value":["0.9.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/strftime"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["strftime-min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.12.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.14"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["dt-core-bootstrap"]},{"type":"character","attributes":{},"value":["1.10.20"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/datatables"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/jquery.dataTables.min.js","js/dataTables.bootstrap.min.js"]},{"type":"character","attributes":{},"value":["css/dataTables.bootstrap.min.css","css/dataTables.bootstrap.extra.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["nouislider"]},{"type":"character","attributes":{},"value":["7.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/nouislider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.nouislider.min.js"]},{"type":"character","attributes":{},"value":["jquery.nouislider.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["selectize.min.js"]},{"type":"character","attributes":{},"value":["selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.1.0.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.12.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.14"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["dt-core-bootstrap"]},{"type":"character","attributes":{},"value":["1.10.20"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/datatables"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/jquery.dataTables.min.js","js/dataTables.bootstrap.min.js"]},{"type":"character","attributes":{},"value":["css/dataTables.bootstrap.min.css","css/dataTables.bootstrap.extra.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["nouislider"]},{"type":"character","attributes":{},"value":["7.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/nouislider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.nouislider.min.js"]},{"type":"character","attributes":{},"value":["jquery.nouislider.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["selectize.min.js"]},{"type":"character","attributes":{},"value":["selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.14"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.1.0.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.11.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["shared/selectize"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"character","attributes":{},"value":["<!--[if lt IE 9]>\n<script src=\"shared/selectize/js/es5-shim.min.js\"><\/script>\n<![endif]-->\n<script src=\"shared/selectize/js/selectize.min.js\"><\/script>"]},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100]}},"value":[{"type":"character","attributes":{},"value":["abind","assertthat","backports","base","blob","broom","car","carData","cellranger","cli","colorspace","compiler","crayon","crosstalk","curl","data.table","datasets","DBI","dbplyr","digest","dplyr","DT","ellipsis","evaluate","fansi","fastmap","flexdashboard","forcats","foreign","fs","generics","ggplot2","glue","graphics","grDevices","grid","gridExtra","gtable","haven","hms","htmltools","htmlwidgets","httpuv","httr","jsonlite","knitr","later","lattice","leaflet","leaflet.extras","lifecycle","lubridate","magrittr","methods","mime","mnormt","modelr","munsell","nlme","openxlsx","parallel","pillar","pkgconfig","promises","psych","purrr","R6","RColorBrewer","Rcpp","readr","readxl","reprex","rgdal","rio","rlang","rmarkdown","rstudioapi","rvest","scales","shiny","sp","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","tmvnsim","tools","utils","vctrs","viridis","viridisLite","withr","xfun","xml2","xtable","yaml","zip"]},{"type":"character","attributes":{},"value":["1.4-5","0.2.1","1.1.8","4.0.2","1.2.1","0.7.0","3.0-8","3.0-4","1.1.0","2.0.2","1.4-1","4.0.2","1.3.4","1.1.0.1","4.3","1.12.8","4.0.2","1.1.0","1.4.4","0.6.25","1.0.1","0.14","0.3.1","0.14","0.4.1","1.0.1","0.5.2","0.5.0","0.8-80","1.4.2","0.0.2","3.3.2","1.4.1","4.0.2","4.0.2","4.0.2","2.3","0.3.0","2.3.1","0.5.3","0.5.0","1.5.1","1.5.4","1.4.2","1.7.0","1.29","1.1.0.1","0.20-41","2.0.3","1.0.0","0.2.0","1.7.9","1.5","4.0.2","0.9","2.0.1","0.1.8","0.5.0","3.1-148","4.1.5","4.0.2","1.4.6","2.0.3","1.1.1","1.9.12.31","0.3.4","2.4.1","1.1-2","1.0.5","1.3.1","1.3.1","0.3.0","1.5-12","0.5.16","0.4.7","2.3","0.11","0.3.5","1.1.1","1.5.0","1.4-2","4.0.2","1.4.6","1.4.0","3.0.3","1.1.0","1.1.0","1.3.0","1.0-2","4.0.2","4.0.2","0.3.2","0.5.1","0.3.0","2.2.0","0.15","1.3.2","1.8-4","2.2.1","2.0.4"]}]}]}
</script>
<!--/html_preserve-->
</div>

</div>

<script>

$(document).ready(function () {

  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');

  // initialize mathjax
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
  document.getElementsByTagName("head")[0].appendChild(script);

});
</script>

<script type="text/javascript">
$(document).ready(function () {
  FlexDashboard.init({
    theme: "simplex",
    fillPage: false,
    orientation: "rows",
    storyboard: false,
    defaultFigWidth: 576,
    defaultFigHeight: 460,
    defaultFigWidthMobile: 360,
    defaultFigHeightMobile: 460,
    resize_reload: true
  });
});
</script>

</body>
</html>
